<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One Simple Trust — Ignite Adaptivity From Within</title>
    <meta name="description" content="One Simple Trust is a transformation consultancy. Home of noise.os — the operating system for adaptive, human, resilient organizations.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0B0F14;
            --bg-subtle: #111820;
            --surface: #1A2230;
            --surface-hover: #222D3E;
            --text: #E8ECF1;
            --text-muted: #8899AA;
            --accent: #C8A96E;
            --accent-light: #E0C98D;
            --accent-glow: rgba(200, 169, 110, 0.15);
            --gradient-warm: linear-gradient(135deg, #C8A96E 0%, #D4A853 50%, #E0C98D 100%);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; font-size: 16px; }
        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.7;
            overflow-x: hidden;
        }
        ::selection { background: var(--accent); color: var(--bg); }

        .canvas-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; }

        /* ── Nav ── */
        nav { position: fixed; top: 0; width: 100%; z-index: 100; padding: 1.5rem 3rem; display: flex; justify-content: space-between; align-items: center; transition: all 0.4s ease; }
        nav.scrolled { background: rgba(11,15,20,0.92); backdrop-filter: blur(20px); padding: 1rem 3rem; border-bottom: 1px solid rgba(200,169,110,0.1); }
        .logo { display: flex; align-items: center; gap: 0.75rem; text-decoration: none; }
        .logo-text { font-family: 'Playfair Display', serif; font-size: 1.3rem; font-weight: 700; color: var(--text); letter-spacing: -0.02em; }
        .logo-text span { color: var(--accent); }
        .nav-links { display: flex; gap: 2.5rem; list-style: none; align-items: center; }
        .nav-links a { color: var(--text-muted); text-decoration: none; font-size: 0.85rem; font-weight: 500; letter-spacing: 0.05em; text-transform: uppercase; transition: color 0.3s; position: relative; }
        .nav-links a::after { content: ''; position: absolute; bottom: -4px; left: 0; width: 0; height: 1px; background: var(--accent); transition: width 0.3s ease; }
        .nav-links a:hover { color: var(--accent); }
        .nav-links a:hover::after { width: 100%; }
        .nav-cta { background: transparent !important; border: 1px solid var(--accent) !important; color: var(--accent) !important; padding: 0.6rem 1.5rem; border-radius: 4px; font-size: 0.8rem !important; letter-spacing: 0.08em; transition: all 0.3s ease !important; cursor: pointer; }
        .nav-cta:hover { background: var(--accent) !important; color: var(--bg) !important; }
        .menu-toggle { display: none; background: none; border: none; cursor: pointer; padding: 0.5rem; }
        .menu-toggle span { display: block; width: 24px; height: 2px; background: var(--text); margin: 5px 0; transition: all 0.3s; }

        /* ── Hero ── */
        .hero { position: relative; min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 6rem 3rem; z-index: 1; }
        .hero-content { max-width: 900px; text-align: center; }
        .hero-eyebrow { display: inline-flex; align-items: center; gap: 0.75rem; font-size: 0.75rem; font-weight: 600; letter-spacing: 0.2em; text-transform: uppercase; color: var(--accent); margin-bottom: 2.5rem; opacity: 0; animation: fadeUp 0.8s ease 0.3s forwards; }
        .hero-eyebrow::before, .hero-eyebrow::after { content: ''; width: 30px; height: 1px; background: var(--accent); opacity: 0.5; }
        .hero h1 { font-family: 'Playfair Display', serif; font-size: clamp(2.8rem, 6vw, 4.5rem); font-weight: 400; line-height: 1.15; letter-spacing: -0.02em; margin-bottom: 2rem; opacity: 0; animation: fadeUp 0.8s ease 0.5s forwards; }
        .hero h1 em { font-style: italic; color: var(--accent); }
        .hero-sub { font-size: 1.15rem; color: var(--text-muted); max-width: 620px; margin: 0 auto 3rem; font-weight: 300; line-height: 1.8; opacity: 0; animation: fadeUp 0.8s ease 0.7s forwards; }
        .hero-sub strong { color: var(--accent); font-weight: 600; }
        .hero-actions { display: flex; gap: 1.5rem; justify-content: center; opacity: 0; animation: fadeUp 0.8s ease 0.9s forwards; }
        .btn-primary { display: inline-flex; align-items: center; gap: 0.5rem; background: var(--accent); color: var(--bg); padding: 1rem 2.5rem; border: none; border-radius: 4px; font-size: 0.85rem; font-weight: 600; letter-spacing: 0.08em; text-transform: uppercase; text-decoration: none; cursor: pointer; transition: all 0.3s ease; }
        .btn-primary:hover { background: var(--accent-light); transform: translateY(-2px); box-shadow: 0 8px 30px rgba(200,169,110,0.25); }
        .btn-ghost { display: inline-flex; align-items: center; gap: 0.5rem; background: transparent; color: var(--text-muted); padding: 1rem 2.5rem; border: 1px solid rgba(136,153,170,0.2); border-radius: 4px; font-size: 0.85rem; font-weight: 500; letter-spacing: 0.08em; text-transform: uppercase; text-decoration: none; cursor: pointer; transition: all 0.3s ease; }
        .btn-ghost:hover { border-color: var(--accent); color: var(--accent); }
        .scroll-indicator { position: absolute; bottom: 3rem; left: 50%; transform: translateX(-50%); display: flex; flex-direction: column; align-items: center; gap: 0.5rem; opacity: 0; animation: fadeUp 0.8s ease 1.2s forwards; }
        .scroll-indicator span { font-size: 0.65rem; letter-spacing: 0.2em; text-transform: uppercase; color: var(--text-muted); }
        .scroll-line { width: 1px; height: 40px; background: linear-gradient(to bottom, var(--accent), transparent); animation: scrollPulse 2s ease infinite; }

        /* ── Sections base ── */
        section { position: relative; z-index: 1; padding: 8rem 3rem; }
        .section-container { max-width: 1200px; margin: 0 auto; }
        .section-label { font-size: 0.7rem; font-weight: 600; letter-spacing: 0.25em; text-transform: uppercase; color: var(--accent); margin-bottom: 1.5rem; }
        .section-title { font-family: 'Playfair Display', serif; font-size: clamp(2rem, 4vw, 3.2rem); font-weight: 400; line-height: 1.2; letter-spacing: -0.02em; margin-bottom: 1.5rem; }
        .section-subtitle { font-size: 1.1rem; color: var(--text-muted); max-width: 600px; font-weight: 300; line-height: 1.8; }

        /* ── About / Who We Are ── */
        #about { background: var(--bg-subtle); }
        .about-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 5rem; align-items: start; margin-top: 4rem; }
        .about-text p { color: var(--text-muted); margin-bottom: 1.5rem; font-size: 1.05rem; font-weight: 300; }

        /* CLD Graph Canvas */
        .cld-container { position: relative; width: 100%; aspect-ratio: 1; }
        #cldCanvas { width: 100%; height: 100%; border-radius: 12px; }

        /* Partners */
        .partners-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 2rem; margin-top: 4rem; max-width: 700px; }
        .partner-card { background: var(--surface); border: 1px solid rgba(200,169,110,0.08); border-radius: 8px; padding: 2rem; text-align: center; transition: all 0.4s ease; }
        .partner-card:hover { border-color: rgba(200,169,110,0.2); transform: translateY(-4px); box-shadow: 0 15px 40px rgba(0,0,0,0.3); }
        .partner-avatar { width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, var(--surface-hover), var(--accent-glow)); margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; font-family: 'Playfair Display', serif; font-size: 1.8rem; color: var(--accent); border: 2px solid rgba(200,169,110,0.15); }
        .partner-card h4 { font-size: 1rem; font-weight: 600; margin-bottom: 0.25rem; }
        .partner-card .partner-role { font-size: 0.8rem; color: var(--text-muted); margin-bottom: 1rem; }
        .partner-links { display: flex; justify-content: center; gap: 1.5rem; }
        .partner-links a { font-size: 0.7rem; color: var(--accent); text-decoration: none; letter-spacing: 0.08em; text-transform: uppercase; font-weight: 500; transition: opacity 0.3s; }
        .partner-links a:hover { opacity: 0.7; }

        /* ── Track Record ── */
        #trackrecord { background: var(--bg); }
        .track-timeline { margin-top: 4rem; position: relative; padding-left: 2rem; }
        .track-timeline::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 1px; background: linear-gradient(to bottom, var(--accent), rgba(200,169,110,0.1)); }
        .track-item { position: relative; padding: 0 0 3rem 2.5rem; }
        .track-item::before { content: ''; position: absolute; left: -4.5px; top: 6px; width: 10px; height: 10px; border-radius: 50%; background: var(--accent); box-shadow: 0 0 12px rgba(200,169,110,0.4); }
        .track-item:last-child { padding-bottom: 0; }
        .track-meta { display: flex; gap: 1rem; align-items: center; margin-bottom: 0.5rem; flex-wrap: wrap; }
        .track-year { font-size: 0.75rem; font-weight: 600; color: var(--accent); letter-spacing: 0.1em; }
        .track-sector { font-size: 0.65rem; padding: 0.2rem 0.6rem; border: 1px solid rgba(200,169,110,0.2); border-radius: 100px; color: var(--text-muted); letter-spacing: 0.05em; text-transform: uppercase; }
        .track-item h3 { font-size: 1.15rem; font-weight: 600; margin-bottom: 0.5rem; }
        .track-item p { color: var(--text-muted); font-size: 0.95rem; font-weight: 300; line-height: 1.7; }

        /* ── Opportunity (for leaders) ── */
        .opp-leader-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem; margin-top: 4rem; }
        .opp-card { background: var(--surface); border: 1px solid rgba(200,169,110,0.08); border-radius: 8px; padding: 2.5rem; transition: all 0.4s ease; position: relative; overflow: hidden; }
        .opp-card::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 2px; background: var(--gradient-warm); transform: scaleX(0); transform-origin: left; transition: transform 0.4s ease; }
        .opp-card:hover { border-color: rgba(200,169,110,0.2); transform: translateY(-4px); box-shadow: 0 20px 60px rgba(0,0,0,0.3); }
        .opp-card:hover::before { transform: scaleX(1); }
        .opp-card h3 { font-size: 1.15rem; font-weight: 600; margin-bottom: 0.75rem; }
        .opp-card .big-number { font-family: 'Playfair Display', serif; font-size: 3rem; color: var(--accent); opacity: 0.2; position: absolute; top: 1.5rem; right: 2rem; }
        .opp-card p { color: var(--text-muted); font-size: 0.95rem; font-weight: 300; }
        .opp-card .opp-question { font-family: 'Playfair Display', serif; font-size: 1.1rem; font-style: italic; color: var(--accent); margin-bottom: 1rem; line-height: 1.5; }
        .opp-card-viz { margin-top: 1.5rem; border-top: 1px solid rgba(200,169,110,0.06); padding-top: 1.2rem; }
        .opp-card-viz canvas { width: 100%; height: auto; display: block; border-radius: 4px; }

        /* ── noise.os 7 Layers Carousel ── */
        #product { background: var(--bg-subtle); }
        .product-header { text-align: center; margin-bottom: 4rem; }
        .product-header .section-subtitle { margin: 0 auto; }
        .noise-badge { display: inline-flex; align-items: center; gap: 0.5rem; background: var(--accent-glow); border: 1px solid rgba(200,169,110,0.2); padding: 0.5rem 1.25rem; border-radius: 100px; font-size: 0.8rem; font-weight: 600; color: var(--accent); letter-spacing: 0.1em; margin-bottom: 2rem; }
        .noise-badge::before { content: ''; width: 6px; height: 6px; background: var(--accent); border-radius: 50%; animation: pulse 2s ease infinite; }

        .carousel-wrapper { position: relative; overflow: hidden; }
        .carousel-track { display: flex; transition: transform 0.5s ease; }
        .carousel-slide { min-width: 100%; display: grid; grid-template-columns: 1fr 1fr; gap: 4rem; align-items: center; padding: 0 1rem; }
        .carousel-slide-visual { position: relative; }
        .layer-number-big { font-family: 'Playfair Display', serif; font-size: 8rem; color: var(--accent); opacity: 0.08; line-height: 1; position: absolute; top: -2rem; left: -1rem; }
        .layer-icon-area { width: 100%; aspect-ratio: 16/10; background: var(--surface); border: 1px solid rgba(200,169,110,0.1); border-radius: 12px; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; }
        .carousel-slide-content h3 { font-size: 1.8rem; font-weight: 600; color: var(--accent); margin-bottom: 0.5rem; }
        .carousel-slide-content h4 { font-size: 1.1rem; font-weight: 400; margin-bottom: 1.25rem; color: var(--text); }
        .carousel-slide-content p { color: var(--text-muted); font-size: 1rem; font-weight: 300; line-height: 1.8; margin-bottom: 1.5rem; }
        .layer-tags { display: flex; flex-wrap: wrap; gap: 0.5rem; }
        .layer-tag { font-size: 0.7rem; padding: 0.35rem 0.75rem; border: 1px solid rgba(200,169,110,0.15); border-radius: 100px; color: var(--text-muted); letter-spacing: 0.05em; }

        .carousel-nav { display: flex; justify-content: center; align-items: center; gap: 1rem; margin-top: 3rem; }
        .carousel-dots { display: flex; gap: 0.5rem; }
        .carousel-dot { width: 8px; height: 8px; border-radius: 50%; background: rgba(200,169,110,0.2); cursor: pointer; transition: all 0.3s; border: none; padding: 0; }
        .carousel-dot.active { background: var(--accent); width: 24px; border-radius: 4px; }
        .carousel-btn { background: var(--surface); border: 1px solid rgba(200,169,110,0.15); color: var(--accent); width: 40px; height: 40px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; transition: all 0.3s; }
        .carousel-btn:hover { background: var(--accent); color: var(--bg); }

        /* ── Difference: 3 Layers ── */
        #difference { background: var(--bg); }
        .layers-visual { display: grid; grid-template-columns: repeat(3, 1fr); gap: 0; margin-top: 4rem; position: relative; }
        .layers-visual::before { display: none; }
        .diff-layer { padding: 3rem; border: 1px solid rgba(200,169,110,0.08); position: relative; transition: all 0.4s ease; }
        .diff-layer:hover { background: var(--surface); border-color: rgba(200,169,110,0.15); }
        .diff-layer-num { font-family: 'Playfair Display', serif; font-size: 0.8rem; font-weight: 600; color: var(--accent); letter-spacing: 0.15em; text-transform: uppercase; margin-bottom: 1rem; }
        .diff-layer h3 { font-family: 'Playfair Display', serif; font-size: 1.5rem; font-weight: 400; margin-bottom: 0.75rem; }
        .diff-layer p { color: var(--text-muted); font-size: 0.95rem; font-weight: 300; line-height: 1.7; margin-bottom: 1.25rem; }
        .diff-layer .lever-list { list-style: none; }
        .diff-layer .lever-list li { font-size: 0.85rem; color: var(--text-muted); padding: 0.4rem 0; border-bottom: 1px solid rgba(200,169,110,0.05); display: flex; align-items: center; gap: 0.5rem; }
        .diff-layer .lever-list li::before { content: ''; width: 4px; height: 4px; background: var(--accent); border-radius: 50%; flex-shrink: 0; }
        .diff-connector { text-align: center; padding: 3rem 2rem; margin-top: 3rem; border-top: 1px solid rgba(200,169,110,0.08); }
        .diff-connector p { font-family: 'Playfair Display', serif; font-size: 1.3rem; font-style: italic; color: var(--accent); max-width: 700px; margin: 0 auto; line-height: 1.6; }
        .diff-connector .small-text { font-family: 'Inter', sans-serif; font-size: 0.9rem; font-style: normal; color: var(--text-muted); margin-top: 1rem; font-weight: 300; }

        /* ── Contact / Let's Talk ── */
        #contact { text-align: center; padding: 10rem 3rem; }
        .contact-content { max-width: 800px; margin: 0 auto; }
        .contact-content .section-title { margin-bottom: 1rem; }
        .contact-content .section-subtitle { margin: 0 auto 3.5rem; text-align: center; }
        .profile-chooser { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; max-width: 700px; margin: 0 auto 3rem; }
        .profile-card { background: var(--surface); border: 2px solid rgba(200,169,110,0.1); border-radius: 12px; padding: 3rem 2rem; cursor: pointer; transition: all 0.4s ease; text-decoration: none; display: block; }
        .profile-card:hover { border-color: var(--accent); transform: translateY(-4px); box-shadow: 0 20px 60px rgba(200,169,110,0.1); }
        .profile-icon { font-size: 2.5rem; margin-bottom: 1.5rem; display: block; }
        .profile-card h3 { font-size: 1.2rem; font-weight: 600; color: var(--text); margin-bottom: 0.5rem; }
        .profile-card .profile-question { font-family: 'Playfair Display', serif; font-size: 1rem; font-style: italic; color: var(--accent); margin-bottom: 1rem; line-height: 1.5; }
        .profile-card p { color: var(--text-muted); font-size: 0.9rem; font-weight: 300; line-height: 1.6; margin-bottom: 1.5rem; }
        .profile-cta { font-size: 0.8rem; font-weight: 600; color: var(--accent); letter-spacing: 0.08em; text-transform: uppercase; }
        .contact-fallback { margin-top: 3rem; }
        .contact-fallback p { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 0.5rem; }
        .contact-email { font-family: 'Playfair Display', serif; font-size: 1.5rem; color: var(--accent); text-decoration: none; border-bottom: 1px solid rgba(200,169,110,0.3); padding-bottom: 0.15rem; transition: all 0.3s ease; }
        .contact-email:hover { border-bottom-color: var(--accent); }
        .contact-socials { display: flex; gap: 2rem; justify-content: center; margin-top: 1.5rem; }
        .contact-socials a { color: var(--text-muted); text-decoration: none; font-size: 0.85rem; font-weight: 500; letter-spacing: 0.05em; transition: color 0.3s; }
        .contact-socials a:hover { color: var(--accent); }

        /* ── Footer ── */
        footer { position: relative; z-index: 1; border-top: 1px solid rgba(200,169,110,0.08); padding: 2.5rem 3rem; display: flex; justify-content: space-between; align-items: center; }
        footer p { font-size: 0.8rem; color: var(--text-muted); }
        footer .footer-links { display: flex; gap: 2rem; }
        footer .footer-links a { color: var(--text-muted); text-decoration: none; font-size: 0.8rem; transition: color 0.3s; }
        footer .footer-links a:hover { color: var(--accent); }

        /* ── Animations ── */
        @keyframes fadeUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes scrollPulse { 0%, 100% { opacity: 0.3; transform: scaleY(0.6); transform-origin: top; } 50% { opacity: 1; transform: scaleY(1); } }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
        .reveal { opacity: 0; transform: translateY(40px); transition: opacity 0.8s ease, transform 0.8s ease; }
        .reveal.visible { opacity: 1; transform: translateY(0); }

        /* ── Responsive ── */
        @media (max-width: 1024px) {
            .carousel-slide { grid-template-columns: 1fr; }
            .carousel-slide-visual { display: none; }
            .layers-visual { grid-template-columns: 1fr; }
            .layers-visual::before { display: none; }
        }
        @media (max-width: 768px) {
            nav { padding: 1.25rem 1.5rem; }
            .nav-links { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: var(--bg); flex-direction: column; justify-content: center; align-items: center; gap: 2rem; }
            .nav-links.open { display: flex; }
            .menu-toggle { display: block; z-index: 101; }
            section { padding: 5rem 1.5rem; }
            .hero { padding: 6rem 1.5rem; }
            .about-grid { grid-template-columns: 1fr; gap: 3rem; }
            .cld-container { display: none; }
            .partners-grid { grid-template-columns: 1fr; }
            .opp-leader-grid { grid-template-columns: 1fr; }
            .profile-chooser { grid-template-columns: 1fr; }
            .hero-actions { flex-direction: column; align-items: center; }
            footer { flex-direction: column; gap: 1rem; text-align: center; }
        }
    </style>
</head>
<body>

<canvas class="canvas-bg" id="bgCanvas"></canvas>

<!-- Navigation -->
<nav id="navbar">
    <a href="#" class="logo">
        <img src="data:image/png;base64,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" alt="One Simple Trust" style="height:36px; width:auto; filter: brightness(10);">
        <span class="logo-text">One Simple <span>Trust</span></span>
    </a>
    <ul class="nav-links" id="navLinks">
        <li><a href="#about">About</a></li>
        <li><a href="#trackrecord">Track Record</a></li>
        <li><a href="#opportunity">For Leaders</a></li>
        <li><a href="#product">noise.os</a></li>
        <li><a href="#difference">How We Deliver</a></li>
        <li><a href="#contact" class="nav-cta">Let's Talk</a></li>
    </ul>
    <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu"><span></span><span></span><span></span></button>
</nav>

<!-- Hero -->
<section class="hero">
    <div class="hero-content">
        <div class="hero-eyebrow">Transformation Consultancy</div>
        <h1>Organizations are living systems.<br>We help them <em>evolve</em>.</h1>
        <p class="hero-sub"><strong>noise.os</strong> is the operating system for adaptive, human, resilient organizations.</p>
        <div class="hero-actions">
            <a href="#contact" class="btn-primary">Start a conversation &rarr;</a>
            <a href="#product" class="btn-ghost">Discover noise.os</a>
        </div>
    </div>
    <div class="scroll-indicator"><span>Scroll</span><div class="scroll-line"></div></div>
</section>

<!-- Who We Are -->
<section id="about">
    <div class="section-container">
        <div class="about-grid">
            <div class="about-text reveal">
                <div class="section-label">Who We Are</div>
                <h2 class="section-title">Built on the belief that trust is the foundation of transformation</h2>
                <p>One Simple Trust was founded to bridge the gap between how organizations are structured and how work actually happens. We partner with leaders and enterprises navigating the complexity of modern business — not with pre-built frameworks, but with the capacity to see the system and evolve it from within.</p>
                <p>Our consultancy practice has produced <strong style="color:var(--accent)">noise.os</strong> — an operating system for organizations that recognize themselves as complex adaptive systems. It connects what they know (data) with how they think (mental models) and what they feel (tensions) — and then gives them the means to experiment, learn, and evolve.</p>
            </div>
            <div class="cld-container reveal">
                <canvas id="cldCanvas"></canvas>
            </div>
        </div>

        <!-- Partners -->
        <div class="partners-grid reveal">
            <div class="partner-card">
                <div class="partner-avatar">EA</div>
                <h4>Eduardo Arcirio</h4>
                <p class="partner-role">Founding Partner</p>
                <div class="partner-links">
                    <a href="#">Profile</a>
                    <a href="#">Cases</a>
                    <a href="mailto:eduardo.arcirio@onesimpletrust.pt">Contact</a>
                </div>
            </div>
            <div class="partner-card">
                <div class="partner-avatar">PL</div>
                <h4>Patrícia Leite</h4>
                <p class="partner-role">Partner</p>
                <div class="partner-links">
                    <a href="#">Profile</a>
                    <a href="#">Cases</a>
                    <a href="mailto:patricia.leite@onesimpletrust.pt">Contact</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Track Record -->
<section id="trackrecord">
    <div class="section-container">
        <div class="reveal">
            <div class="section-label">Track Record</div>
            <h2 class="section-title">Where we've activated transformation</h2>
            <p class="section-subtitle">Real organizations, real complexity, real evolution.</p>
        </div>
        <div class="track-timeline reveal">
            <div class="track-item">
                <div class="track-meta">
                    <span class="track-year">2020–Present</span>
                    <span class="track-sector">Consultancy</span>
                    <span class="track-sector">Portugal & Brazil</span>
                </div>
                <h3>One Simple Trust — Founder & Systemic Change Facilitator</h3>
                <p>Founded a transformation consultancy at the intersection of complexity science, organizational design, and technology. Building noise.os — the operating system for adaptive organizations — while delivering consulting engagements that generate real organizational intelligence.</p>
            </div>
            <div class="track-item">
                <div class="track-meta">
                    <span class="track-year">2024–2025</span>
                    <span class="track-sector">Consultancy</span>
                    <span class="track-sector">Portugal</span>
                </div>
                <h3>GALP — Organisation Development Consultant</h3>
                <p>Building internal capability of organizational development (ways of working, org design, artefacts, team development). Applied to 5 business units value chains.</p>
            </div>
            <div class="track-item">
                <div class="track-meta">
                    <span class="track-year">2023–2024</span>
                    <span class="track-sector">Media</span>
                    <span class="track-sector">Sweden</span>
                </div>
                <h3>Spotify — Strategy & Operations Manager</h3>
                <p>Strategy & operations leadership. Platform ways of working.</p>
            </div>
            <div class="track-item">
                <div class="track-meta">
                    <span class="track-year">2020–2024</span>
                    <span class="track-sector">Finance</span>
                    <span class="track-sector">Portugal</span>
                </div>
                <h3>novobanco — Digital Transformation and Business Agility Consultant</h3>
                <p>Developing the operating system for all digital transformation teams (ways of working, org design, cadences, metrics, business model). Kanban for value stream flow management and network science for value chain discovery.</p>
            </div>
            <div class="track-item">
                <div class="track-meta">
                    <span class="track-year">2018–2023</span>
                    <span class="track-sector">eCommerce</span>
                    <span class="track-sector">Portugal</span>
                </div>
                <h3>Farfetch — Agility & Product Operations</h3>
                <p>Leading product operations teams. Business Transformation. Business Agility leadership.</p>
            </div>
            <div class="track-item">
                <div class="track-meta">
                    <span class="track-year">2019–2020</span>
                    <span class="track-sector">Consultancy</span>
                    <span class="track-sector">Global</span>
                </div>
                <h3>NTTData — Organisation Development</h3>
                <p>Leading software development teams supporting several customers in Portugal and Europe. Leading the Agile practice @ the High Performance Center.</p>
            </div>
            <div class="track-item">
                <div class="track-meta">
                    <span class="track-year">2015–2019</span>
                    <span class="track-sector">Consultancy</span>
                    <span class="track-sector">Global</span>
                </div>
                <h3>Capgemini — Business Units Lead Controller</h3>
                <p>Units and projects financial feasibility modelling. Governance and compliance frameworks. Finance simulation and transformation.</p>
            </div>
            <div class="track-item">
                <div class="track-meta">
                    <span class="track-year">2011–2014</span>
                    <span class="track-sector">Government & Diplomacy</span>
                    <span class="track-sector">Brazil & UK</span>
                </div>
                <h3>British Foreign and Commonwealth Office — Director for Corporate Services</h3>
                <p>Support functions coordination. Organizational transformation.</p>
            </div>
            <div class="track-item">
                <div class="track-meta">
                    <span class="track-year">2010–2011</span>
                    <span class="track-sector">Technology</span>
                    <span class="track-sector">Brazil</span>
                </div>
                <h3>Search Technology — Corporate Strategy Director</h3>
                <p>Strategy management. Research & development pipelines for innovation.</p>
            </div>
            <div class="track-item">
                <div class="track-meta">
                    <span class="track-year">1997–2011</span>
                    <span class="track-sector">Technology</span>
                    <span class="track-sector">Brazil</span>
                </div>
                <h3>Politec — Strategic Stewardship</h3>
                <p>Corporate strategy management. Business Controlling. Strategy to Operations coordination. Asset management. M&A.</p>
            </div>
        </div>
    </div>
</section>

<!-- For Leaders / Opportunity -->
<section id="opportunity">
    <div class="section-container">
        <div class="reveal">
            <div class="section-label">For Leaders & Enterprises</div>
            <h2 class="section-title">You feel it. Now see it.</h2>
            <p class="section-subtitle">Leaders know intuitively that their organizations are more complex than their tools can handle. That feeling is real — and it has a shape.</p>
        </div>
        <div class="opp-leader-grid">
            <div class="opp-card reveal">
                <div class="big-number">01</div>
                <div class="opp-question">"Why does every change program produce the opposite of what we intended?"</div>
                <h3>The Paradox of Control</h3>
                <p>You have more data than ever, but less understanding. More tools, but less visibility into how your organization actually behaves. The problem isn't effort — it's that you're using linear tools in a non-linear system.</p>
                <div class="opp-card-viz"><canvas id="oppViz1" width="600" height="200"></canvas></div>
            </div>
            <div class="opp-card reveal">
                <div class="big-number">02</div>
                <div class="opp-question">"We restructured twice this year. Why isn't anything different?"</div>
                <h3>The Invisible Architecture</h3>
                <p>Org charts show boxes and lines. They don't show the mental models that drive decisions, the informal networks that carry influence, or the tensions that silently shape every initiative. You're redesigning the map while the territory shifts beneath you.</p>
                <div class="opp-card-viz"><canvas id="oppViz2" width="600" height="200"></canvas></div>
            </div>
            <div class="opp-card reveal">
                <div class="big-number">03</div>
                <div class="opp-question">"How do I make better decisions when I can't see the system?"</div>
                <h3>The Leadership Blind Spot</h3>
                <p>You're confident in some areas, uncertain in others. But confidence and competence don't always align. The gap between what you think you know and what the system reveals is where the highest leverage hides.</p>
                <div class="opp-card-viz"><canvas id="oppViz3" width="600" height="200"></canvas></div>
            </div>
        </div>
    </div>
</section>

<!-- noise.os — 7 Layers Carousel -->
<section id="product">
    <div class="section-container">
        <div class="product-header reveal">
            <div class="noise-badge">noise.os</div>
            <h2 class="section-title">The operating system for<br>adaptive organizations</h2>
            <p class="section-subtitle">Not a single tool but a chain of interactions — seven integrated layers that connect, interpret, simulate, and learn from the living data of your organization.</p>
        </div>
        <div class="carousel-wrapper reveal">
            <div class="carousel-track" id="carouselTrack">
                <div class="carousel-slide">
                    <div class="carousel-slide-visual"><div class="layer-number-big">01</div><div class="layer-icon-area" id="layerViz1"></div></div>
                    <div class="carousel-slide-content">
                        <h3>Organizational Graph</h3>
                        <h4>The structural backbone</h4>
                        <p>A living graph that captures your business architecture as it truly is: organizational units, capabilities, processes, roles, and their relationships. Not a static org chart — a navigable model of how work actually flows through your system.</p>
                        <div class="layer-tags"><span class="layer-tag">Neo4j graph</span><span class="layer-tag">Business architecture</span><span class="layer-tag">Living model</span><span class="layer-tag">Temporal metadata</span></div>
                    </div>
                </div>
                <div class="carousel-slide">
                    <div class="carousel-slide-visual"><div class="layer-number-big">02</div><div class="layer-icon-area" id="layerViz2"></div></div>
                    <div class="carousel-slide-content">
                        <h3>Semantic Memory</h3>
                        <h4>The meaning layer</h4>
                        <p>Captures what people actually believe about how work happens. Through AI-facilitated interviews and micro-narratives, noise.os surfaces the mental models, hidden assumptions, and cultural signals that no dashboard can reveal.</p>
                        <div class="layer-tags"><span class="layer-tag">Vector embeddings</span><span class="layer-tag">Mental models</span><span class="layer-tag">Consensus & divergence</span><span class="layer-tag">Cultural signals</span></div>
                    </div>
                </div>
                <div class="carousel-slide">
                    <div class="carousel-slide-visual"><div class="layer-number-big">03</div><div class="layer-icon-area" id="layerViz3"></div></div>
                    <div class="carousel-slide-content">
                        <h3>Tension Engine</h3>
                        <h4>Making friction visible</h4>
                        <p>Synthesizes organizational tensions into Causal Loop Diagrams that reveal reinforcing spirals, balancing constraints, and systemic archetypes. Surfaces both what people say (micro-narratives) and what the system computes (structural gap analysis).</p>
                        <div class="layer-tags"><span class="layer-tag">Causal Loop Diagrams</span><span class="layer-tag">Leverage points</span><span class="layer-tag">Health diagnostics</span><span class="layer-tag">12 OS Canvas levers</span></div>
                    </div>
                </div>
                <div class="carousel-slide">
                    <div class="carousel-slide-visual"><div class="layer-number-big">04</div><div class="layer-icon-area" id="layerViz4"></div></div>
                    <div class="carousel-slide-content">
                        <h3>Simulation Sandbox</h3>
                        <h4>Play with the future</h4>
                        <p>Test changes to your organizational graph before committing. What happens if you restructure this team? Redistribute this capability? Change this governance model? The sandbox surfaces probable consequences in complex space.</p>
                        <div class="layer-tags"><span class="layer-tag">What-if scenarios</span><span class="layer-tag">Graph mutations</span><span class="layer-tag">Impact propagation</span><span class="layer-tag">Scenario comparison</span></div>
                    </div>
                </div>
                <div class="carousel-slide">
                    <div class="carousel-slide-visual"><div class="layer-number-big">05</div><div class="layer-icon-area" id="layerViz5"></div></div>
                    <div class="carousel-slide-content">
                        <h3>Experiment Lab</h3>
                        <h4>From thinking to doing</h4>
                        <p>Converts simulation insights into bounded kaizen experiments — safe-to-try adjustments with clear hypotheses, observation criteria, and feedback mechanisms. A successful experiment becomes a permanent change to the organizational model.</p>
                        <div class="layer-tags"><span class="layer-tag">Experiment Kanban</span><span class="layer-tag">Strategic alignment</span><span class="layer-tag">Safe-to-try</span><span class="layer-tag">Feedback loops</span></div>
                    </div>
                </div>
                <div class="carousel-slide">
                    <div class="carousel-slide-visual"><div class="layer-number-big">06</div><div class="layer-icon-area" id="layerViz6"></div></div>
                    <div class="carousel-slide-content">
                        <h3>Reinforcement Learning</h3>
                        <h4>The self-evolution substrate</h4>
                        <p>Continuously compares predictions against outcomes. Did that flagged risk materialize? Did the simulation predict correctly? The platform becomes more valuable with every organizational cycle. Data is the moat.</p>
                        <div class="layer-tags"><span class="layer-tag">Prediction-outcome pairs</span><span class="layer-tag">Model refinement</span><span class="layer-tag">Pattern library</span><span class="layer-tag">Cross-org learning</span></div>
                    </div>
                </div>
                <div class="carousel-slide">
                    <div class="carousel-slide-visual"><div class="layer-number-big">07</div><div class="layer-icon-area" id="layerViz7"></div></div>
                    <div class="carousel-slide-content">
                        <h3>AI Orchestrator</h3>
                        <h4>The organizational facilitator</h4>
                        <p>Not a chatbot — the primary interface between humans and the living organizational model. It asks questions before giving answers, highlights connections rather than prescribing solutions, and challenges assumptions respectfully. The voice of noise.os is a systems thinker.</p>
                        <div class="layer-tags"><span class="layer-tag">Voice interaction</span><span class="layer-tag">RAG over graph</span><span class="layer-tag">Guided sense-making</span><span class="layer-tag">Complexity-aware</span></div>
                    </div>
                </div>
            </div>
            <div class="carousel-nav">
                <button class="carousel-btn" id="carouselPrev">&larr;</button>
                <div class="carousel-dots" id="carouselDots"></div>
                <button class="carousel-btn" id="carouselNext">&rarr;</button>
            </div>
        </div>
    </div>
</section>

<!-- How We Deliver / Difference -->
<section id="difference">
    <div class="section-container">
        <div class="reveal">
            <div class="section-label">How We Deliver</div>
            <h2 class="section-title">Three layers that reveal<br>structural levers for change</h2>
            <p class="section-subtitle">Every tool on the market helps organizations do things to themselves. We help organizations see themselves — through three interconnected layers that make structural leverage visible.</p>
        </div>
        <div class="layers-visual reveal">
            <div class="diff-layer">
                <div class="diff-layer-num">Layer 01 &mdash; Meaning</div>
                <h3>The Business Model</h3>
                <p>How people think the organization works. The beliefs, assumptions, and narratives that drive decisions — often invisible, frequently misaligned.</p>
                <ul class="lever-list">
                    <li>Surfaced & computed beliefs</li>
                    <li>Consensus & divergence maps</li>
                    <li>Cultural signals & patterns</li>
                    <li>Implicit assumptions</li>
                    <li>Perception gaps</li>
                </ul>
            </div>
            <div class="diff-layer">
                <div class="diff-layer-num">Layer 02 &mdash; Means</div>
                <h3>The Business Architecture</h3>
                <p>How the organization is built — and how it actually operates. Beyond the formal chart: the informal relationships, power dynamics, influence networks, and unwritten rules that truly shape how decisions are made and work gets done.</p>
                <ul class="lever-list">
                    <li>Organizational units & teams</li>
                    <li>Informal networks & influence flows</li>
                    <li>Power dynamics & decision patterns</li>
                    <li>Value streams & processes</li>
                    <li>Capabilities, governance & technology</li>
                </ul>
            </div>
            <div class="diff-layer">
                <div class="diff-layer-num">Layer 03 &mdash; Tension</div>
                <h3>The Tensions Map</h3>
                <p>Where meaning and means collide. The friction, misalignments, and feedback loops that shape organizational behavior — mapped as causal systems.</p>
                <ul class="lever-list">
                    <li>Reinforcing spirals</li>
                    <li>Balancing constraints</li>
                    <li>Systemic archetypes</li>
                    <li>Leverage points</li>
                    <li>Health scores per lever</li>
                </ul>
            </div>
        </div>
        <div class="hwd-flow-viz reveal" style="margin-top:2rem;padding:0 1rem;">
            <canvas id="hwdFlowCanvas" width="1200" height="180" style="width:100%;height:auto;display:block;border-radius:6px;"></canvas>
        </div>
        <div class="diff-connector reveal">
            <p>"The connection between these three layers is where the structural levers for effective change become visible."</p>
            <p class="small-text">This is what we deliver: not a PowerPoint, not a framework — the capacity to see and act on the systemic forces shaping your organization.</p>
        </div>
    </div>
</section>

<!-- Let's Talk -->
<section id="contact">
    <div class="contact-content reveal">
        <div class="section-label">Let's Talk</div>
        <h2 class="section-title">Where are you in your journey?</h2>
        <p class="section-subtitle">Every transformation starts differently. Tell us where you stand — we'll meet you there.</p>

        <div class="profile-chooser">
            <a href="mailto:hello@onesimpletrust.pt?subject=Leader%20Inquiry%20—%20I%20want%20to%20see%20the%20system&body=I'm%20a%20leader%20looking%20to%20understand%20my%20organization%20as%20a%20system.%20Let's%20talk." class="profile-card">
                <span class="profile-icon">&#9673;</span>
                <div class="profile-question">"I sense my organization is more complex than my tools can handle."</div>
                <h3>I'm a Leader</h3>
                <p>You feel the gap between strategy and execution. You want to see the system as it truly is — the hidden dynamics, the mental models, the tensions — and build your capacity to evolve it intentionally.</p>
                <span class="profile-cta">Start seeing &rarr;</span>
            </a>
            <a href="mailto:hello@onesimpletrust.pt?subject=Enterprise%20Inquiry%20—%20We%20need%20to%20evolve%20our%20organization&body=We're%20an%20enterprise%20looking%20for%20transformation%20that%20goes%20beyond%20frameworks.%20Let's%20talk." class="profile-card">
                <span class="profile-icon">&#9670;</span>
                <div class="profile-question">"We've tried transformation before. We need something that actually changes the system."</div>
                <h3>We're an Enterprise</h3>
                <p>Your organization has been through change programs. You're ready for an approach that doesn't parachute in with answers but builds the internal capability to sense, experiment, and adapt — continuously.</p>
                <span class="profile-cta">Start evolving &rarr;</span>
            </a>
        </div>

        <div class="contact-fallback">
            <p>Or reach out directly:</p>
            <a href="mailto:hello@onesimpletrust.pt" class="contact-email">hello@onesimpletrust.pt</a>
            <div class="contact-socials">
                <a href="https://linkedin.com" target="_blank" rel="noopener">LinkedIn</a>
                <a href="https://twitter.com" target="_blank" rel="noopener">Twitter / X</a>
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<footer>
    <p>&copy; 2026 One Simple Trust. All rights reserved.</p>
    <div class="footer-links">
        <a href="#">Privacy</a>
        <a href="#">Terms</a>
    </div>
</footer>

<script>
// ── Background Particles ──
const canvas = document.getElementById('bgCanvas');
const ctx = canvas.getContext('2d');
let particles = [];

function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }

class Particle {
    constructor() { this.reset(); }
    reset() {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * canvas.height;
        this.size = Math.random() * 1.5 + 0.5;
        this.speedX = (Math.random() - 0.5) * 0.3;
        this.speedY = (Math.random() - 0.5) * 0.3;
        this.opacity = Math.random() * 0.3 + 0.05;
    }
    update() {
        this.x += this.speedX; this.y += this.speedY;
        if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
        if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
    }
    draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(200,169,110,${this.opacity})`;
        ctx.fill();
    }
}

function initParticles() {
    particles = [];
    const count = Math.min(80, Math.floor((canvas.width * canvas.height) / 15000));
    for (let i = 0; i < count; i++) particles.push(new Particle());
}

function connectParticles() {
    for (let i = 0; i < particles.length; i++) {
        for (let j = i + 1; j < particles.length; j++) {
            const dx = particles[i].x - particles[j].x;
            const dy = particles[i].y - particles[j].y;
            const dist = Math.sqrt(dx * dx + dy * dy);
            if (dist < 150) {
                ctx.beginPath();
                ctx.strokeStyle = `rgba(200,169,110,${0.04 * (1 - dist / 150)})`;
                ctx.lineWidth = 0.5;
                ctx.moveTo(particles[i].x, particles[i].y);
                ctx.lineTo(particles[j].x, particles[j].y);
                ctx.stroke();
            }
        }
    }
}

function animateCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    particles.forEach(p => { p.update(); p.draw(); });
    connectParticles();
    requestAnimationFrame(animateCanvas);
}

resizeCanvas(); initParticles(); animateCanvas();
window.addEventListener('resize', () => { resizeCanvas(); initParticles(); });

// ── CLD Graph Animation ──
const cldCanvas = document.getElementById('cldCanvas');
if (cldCanvas) {
    const cCtx = cldCanvas.getContext('2d');
    let cldNodes = [];
    let cldEdges = [];
    let cldTime = 0;

    function initCLD() {
        const w = cldCanvas.parentElement.offsetWidth;
        const h = w;
        cldCanvas.width = w * 2;
        cldCanvas.height = h * 2;
        cldCanvas.style.width = w + 'px';
        cldCanvas.style.height = h + 'px';
        cCtx.scale(2, 2);

        const cx = w / 2, cy = h / 2;
        const r = w * 0.3;

        cldNodes = [
            { x: cx, y: cy, label: 'Trust', size: 10, fixed: true },
            { x: cx + r * 0.8, y: cy - r * 0.5, label: 'Transparency', size: 6 },
            { x: cx + r * 0.6, y: cy + r * 0.7, label: 'Autonomy', size: 6 },
            { x: cx - r * 0.7, y: cy + r * 0.5, label: 'Adaptation', size: 6 },
            { x: cx - r * 0.8, y: cy - r * 0.4, label: 'Alignment', size: 6 },
            { x: cx + r * 0.1, y: cy - r * 0.85, label: 'Learning', size: 6 },
            { x: cx - r * 0.2, y: cy + r * 0.9, label: 'Safety', size: 6 },
        ];

        cldEdges = [
            { from: 0, to: 1 }, { from: 1, to: 2 }, { from: 2, to: 3 },
            { from: 3, to: 4 }, { from: 4, to: 5 }, { from: 5, to: 6 },
            { from: 6, to: 0 }, { from: 0, to: 3 }, { from: 5, to: 0 },
        ];
    }

    function animateCLD() {
        cldTime += 0.005;
        const w = cldCanvas.width / 2;
        const h = cldCanvas.height / 2;
        cCtx.clearRect(0, 0, w, h);

        cldNodes.forEach((n, i) => {
            if (i > 0) {
                n.x += Math.sin(cldTime * 1.5 + i * 1.7) * 0.15;
                n.y += Math.cos(cldTime * 1.2 + i * 2.1) * 0.15;
            }
        });

        cldEdges.forEach((e, idx) => {
            const from = cldNodes[e.from];
            const to = cldNodes[e.to];
            const flowPos = (cldTime * 0.8 + idx * 0.3) % 1;

            cCtx.beginPath();
            cCtx.strokeStyle = 'rgba(200,169,110,0.15)';
            cCtx.lineWidth = 1;
            cCtx.moveTo(from.x, from.y);
            cCtx.lineTo(to.x, to.y);
            cCtx.stroke();

            const fx = from.x + (to.x - from.x) * flowPos;
            const fy = from.y + (to.y - from.y) * flowPos;
            cCtx.beginPath();
            cCtx.arc(fx, fy, 2, 0, Math.PI * 2);
            cCtx.fillStyle = `rgba(200,169,110,${0.5 + Math.sin(cldTime * 3 + idx) * 0.3})`;
            cCtx.fill();

            const mx = from.x + (to.x - from.x) * 0.65;
            const my = from.y + (to.y - from.y) * 0.65;
            const angle = Math.atan2(to.y - from.y, to.x - from.x);
            cCtx.beginPath();
            cCtx.moveTo(mx + Math.cos(angle) * 5, my + Math.sin(angle) * 5);
            cCtx.lineTo(mx + Math.cos(angle + 2.5) * 5, my + Math.sin(angle + 2.5) * 5);
            cCtx.lineTo(mx + Math.cos(angle - 2.5) * 5, my + Math.sin(angle - 2.5) * 5);
            cCtx.fillStyle = 'rgba(200,169,110,0.25)';
            cCtx.fill();
        });

        cldNodes.forEach((n, i) => {
            const p = 1 + Math.sin(cldTime * 2 + i) * 0.15;
            const s = n.size * p;

            cCtx.beginPath();
            cCtx.arc(n.x, n.y, s * 2.5, 0, Math.PI * 2);
            cCtx.fillStyle = i === 0 ? 'rgba(200,169,110,0.08)' : 'rgba(200,169,110,0.04)';
            cCtx.fill();

            cCtx.beginPath();
            cCtx.arc(n.x, n.y, s, 0, Math.PI * 2);
            cCtx.fillStyle = i === 0 ? 'rgba(200,169,110,0.9)' : 'rgba(200,169,110,0.5)';
            cCtx.fill();

            cCtx.font = i === 0 ? '600 12px Inter' : '400 10px Inter';
            cCtx.fillStyle = i === 0 ? 'rgba(200,169,110,1)' : 'rgba(200,169,110,0.6)';
            cCtx.textAlign = 'center';
            cCtx.fillText(n.label, n.x, n.y + s + 16);
        });

        cCtx.font = 'italic 14px Playfair Display';
        cCtx.fillStyle = 'rgba(200,169,110,0.3)';
        cCtx.textAlign = 'center';
        cCtx.fillText('R', w / 2 + 60, h / 2 - 30);

        requestAnimationFrame(animateCLD);
    }

    initCLD(); animateCLD();
    window.addEventListener('resize', initCLD);
}

// ── Carousel ──
const track = document.getElementById('carouselTrack');
const dotsContainer = document.getElementById('carouselDots');
const slides = track.querySelectorAll('.carousel-slide');
let currentSlide = 0;
const totalSlides = slides.length;

for (let i = 0; i < totalSlides; i++) {
    const dot = document.createElement('button');
    dot.className = 'carousel-dot' + (i === 0 ? ' active' : '');
    dot.addEventListener('click', () => goToSlide(i));
    dotsContainer.appendChild(dot);
}

function goToSlide(n) {
    currentSlide = n;
    track.style.transform = `translateX(-${n * 100}%)`;
    dotsContainer.querySelectorAll('.carousel-dot').forEach((d, i) => {
        d.className = 'carousel-dot' + (i === n ? ' active' : '');
    });
}

document.getElementById('carouselPrev').addEventListener('click', () => goToSlide((currentSlide - 1 + totalSlides) % totalSlides));
document.getElementById('carouselNext').addEventListener('click', () => goToSlide((currentSlide + 1) % totalSlides));

let autoPlay = setInterval(() => goToSlide((currentSlide + 1) % totalSlides), 6000);
document.querySelector('.carousel-wrapper').addEventListener('mouseenter', () => clearInterval(autoPlay));
document.querySelector('.carousel-wrapper').addEventListener('mouseleave', () => {
    autoPlay = setInterval(() => goToSlide((currentSlide + 1) % totalSlides), 6000);
});

// ── Scroll Animations ──
const reveals = document.querySelectorAll('.reveal');
const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
}, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });
reveals.forEach(el => observer.observe(el));

// ── Navbar Scroll ──
window.addEventListener('scroll', () => {
    document.getElementById('navbar').classList.toggle('scrolled', window.scrollY > 80);
});

// ── Mobile Menu ──
document.getElementById('menuToggle').addEventListener('click', () => {
    document.getElementById('navLinks').classList.toggle('open');
});
document.getElementById('navLinks').querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => document.getElementById('navLinks').classList.remove('open'));
});

// ── Smooth Scroll ──
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });
});

// ── Layer Visualizations ──
function drawLayerViz(containerId, drawFn) {
    const container = document.getElementById(containerId);
    if (!container) return;
    const cvs = document.createElement('canvas');
    cvs.width = 600; cvs.height = 375;
    cvs.style.width = '100%'; cvs.style.height = '100%';
    container.appendChild(cvs);
    const lCtx = cvs.getContext('2d');
    let t = Math.random() * 100;
    function animate() {
        t += 0.01;
        lCtx.clearRect(0, 0, 600, 375);
        drawFn(lCtx, 600, 375, t);
        requestAnimationFrame(animate);
    }
    animate();
}

// ── Rich Organizational Graph for Layer 1 ──
(function(){
    const container = document.getElementById('layerViz1');
    if (!container) return;
    const cvs = document.createElement('canvas');
    const W = 600, H = 375;
    cvs.width = W; cvs.height = H;
    cvs.style.width = '100%'; cvs.style.height = '100%';
    container.appendChild(cvs);
    const c = cvs.getContext('2d');

    const COL = {
        OrgUnit:   {f:'rgba(200,169,110,',l:'#C8A96E'},
        Capability:{f:'rgba(110,170,200,',l:'#6EAAC8'},
        Process:   {f:'rgba(139,200,110,',l:'#8BC86E'},
        Role:      {f:'rgba(200,110,139,',l:'#C86E8B'},
        System:    {f:'rgba(176,139,212,',l:'#B08BD4'},
        Product:   {f:'rgba(212,168,91,', l:'#D4A85B'},
        Objective: {f:'rgba(91,200,180,', l:'#5BC8B4'},
        Team:      {f:'rgba(232,236,241,',l:'#E8ECF1'}
    };

    const ND = [
        {tp:'OrgUnit',l:'Executive Board',s:9},{tp:'OrgUnit',l:'Product',s:7},{tp:'OrgUnit',l:'Engineering',s:7},
        {tp:'OrgUnit',l:'People',s:6},{tp:'OrgUnit',l:'Finance',s:5},{tp:'OrgUnit',l:'Operations',s:6},
        {tp:'Capability',l:'Data Analytics',s:4},{tp:'Capability',l:'Cloud Infra',s:4},{tp:'Capability',l:'Customer Insight',s:4},
        {tp:'Capability',l:'Agile Delivery',s:4},{tp:'Capability',l:'Talent Dev',s:3},
        {tp:'Process',l:'Strategy Review',s:3},{tp:'Process',l:'Sprint Delivery',s:3},{tp:'Process',l:'Hiring',s:3},
        {tp:'Process',l:'Incident Resp.',s:3},{tp:'Process',l:'Budget Cycle',s:3},
        {tp:'Role',l:'CPO',s:3},{tp:'Role',l:'CTO',s:3},{tp:'Role',l:'Scrum Master',s:3},{tp:'Role',l:'Data Lead',s:3},
        {tp:'System',l:'ERP',s:4},{tp:'System',l:'CRM',s:3},{tp:'System',l:'CI/CD',s:3},
        {tp:'Product',l:'Core Platform',s:5},{tp:'Product',l:'Mobile App',s:3},{tp:'Product',l:'API Gateway',s:3},
        {tp:'Objective',l:'Market Expansion',s:4},{tp:'Objective',l:'Op. Excellence',s:3},{tp:'Objective',l:'Talent Retention',s:3},
        {tp:'Team',l:'Platform Squad',s:3},{tp:'Team',l:'Growth Squad',s:3},{tp:'Team',l:'Core Experience',s:3},{tp:'Team',l:'Data Team',s:3}
    ];

    const ED = [
        [0,1],[0,2],[0,3],[0,4],[0,5],
        [2,6],[2,7],[1,8],[1,9],[3,10],
        [0,11],[2,12],[3,13],[5,14],[4,15],
        [16,1],[17,2],[18,9],[19,6],[1,23],[23,24],[23,25],
        [20,4],[20,5],[21,8],[22,7],
        [26,1],[26,8],[27,5],[28,3],[28,10],
        [29,2],[30,1],[31,1],[32,6],
        [6,21],[9,12],[29,7],[30,23],[31,24],[32,19],[14,7],[11,26],[12,22]
    ];

    const types = ['OrgUnit','Capability','Process','Role','System','Product','Objective','Team'];
    let nodes = ND.map((d,i) => {
        const ti = types.indexOf(d.tp);
        const ang = (ti/8)*Math.PI*2 + (Math.random()-0.5)*0.7;
        const rad = d.tp==='OrgUnit' ? 40+Math.random()*50 : 100+Math.random()*120;
        let x = W/2 + Math.cos(ang)*rad + (Math.random()-0.5)*60;
        let y = H/2 + Math.sin(ang)*rad + (Math.random()-0.5)*50;
        if(i===0){x=W/2;y=H/2;}
        return {...d,x,y,bx:x,by:y,vx:0,vy:0,ph:Math.random()*6.28};
    });

    // Force layout
    let iters=0;
    function forces(){
        if(iters>250)return;iters++;
        for(let i=0;i<nodes.length;i++){
            for(let j=i+1;j<nodes.length;j++){
                let dx=nodes[j].x-nodes[i].x,dy=nodes[j].y-nodes[i].y;
                let d=Math.sqrt(dx*dx+dy*dy)||1;
                if(d<25)d=25;
                let f=800/(d*d);
                let fx=(dx/d)*f,fy=(dy/d)*f;
                nodes[i].vx-=fx;nodes[i].vy-=fy;
                nodes[j].vx+=fx;nodes[j].vy+=fy;
            }
        }
        ED.forEach(e=>{
            const a=nodes[e[0]],b=nodes[e[1]];
            let dx=b.x-a.x,dy=b.y-a.y,d=Math.sqrt(dx*dx+dy*dy)||1;
            let f=(d-60)*0.008;
            let fx=(dx/d)*f,fy=(dy/d)*f;
            a.vx+=fx;a.vy+=fy;b.vx-=fx;b.vy-=fy;
        });
        nodes.forEach(n=>{
            n.vx-=(n.x-W/2)*0.0005;n.vy-=(n.y-H/2)*0.0005;
            n.vx*=0.82;n.vy*=0.82;
            n.x+=n.vx;n.y+=n.vy;
            n.x=Math.max(30,Math.min(W-30,n.x));
            n.y=Math.max(25,Math.min(H-25,n.y));
            n.bx=n.x;n.by=n.y;
        });
    }

    // Camera auto-zoom
    let cam={x:0,y:0,z:1,tx:0,ty:0,tz:1};
    let zPhase=0,zTimer=0;
    const zTargets=[
        {z:1,x:0,y:0},
        {z:1.6,ni:0},  // Executive Board
        {z:1.8,tp:'Capability'},
        {z:1.7,ni:23}, // Core Platform
        {z:1,x:0,y:0},
        {z:1.5,tp:'Process'},
        {z:1.8,tp:'Role'},
        {z:1,x:0,y:0},
    ];

    function updateCam(dt){
        zTimer+=dt;
        if(zTimer>8){
            zTimer=0;zPhase=(zPhase+1)%zTargets.length;
            const tg=zTargets[zPhase];
            cam.tz=tg.z;
            if(tg.ni!==undefined){cam.tx=W/2-nodes[tg.ni].bx;cam.ty=H/2-nodes[tg.ni].by;}
            else if(tg.tp){
                const ns=nodes.filter(n=>n.tp===tg.tp);
                const ax=ns.reduce((s,n)=>s+n.bx,0)/ns.length;
                const ay=ns.reduce((s,n)=>s+n.by,0)/ns.length;
                cam.tx=W/2-ax;cam.ty=H/2-ay;
            }else{cam.tx=tg.x;cam.ty=tg.y;}
        }
        cam.z+=(cam.tz-cam.z)*0.02;
        cam.x+=(cam.tx-cam.x)*0.02;
        cam.y+=(cam.ty-cam.y)*0.02;
    }

    function w2s(wx,wy){return{x:(wx+cam.x-W/2)*cam.z+W/2,y:(wy+cam.y-H/2)*cam.z+H/2};}

    let t=0;
    function draw(){
        const dt=0.016;t+=dt;
        forces();updateCam(dt);

        c.fillStyle='#0B0F14';c.fillRect(0,0,W,H);

        // Subtle grid
        const gs=40*cam.z;
        c.strokeStyle='rgba(200,169,110,0.015)';c.lineWidth=0.5;
        const ox=((cam.x)*cam.z+W/2)%gs,oy=((cam.y)*cam.z+H/2)%gs;
        for(let x=ox;x<W;x+=gs){c.beginPath();c.moveTo(x,0);c.lineTo(x,H);c.stroke();}
        for(let y=oy;y<H;y+=gs){c.beginPath();c.moveTo(0,y);c.lineTo(W,y);c.stroke();}

        // Float nodes gently
        nodes.forEach((n,i)=>{
            n.x=n.bx+Math.sin(t*0.4+n.ph)*1.5;
            n.y=n.by+Math.cos(t*0.35+n.ph*1.3)*1.5;
        });

        // Edges with flow particles
        ED.forEach((e,idx)=>{
            const a=nodes[e[0]],b=nodes[e[1]];
            const sa=w2s(a.x,a.y),sb=w2s(b.x,b.y);
            c.beginPath();c.moveTo(sa.x,sa.y);c.lineTo(sb.x,sb.y);
            c.strokeStyle='rgba(200,169,110,0.07)';c.lineWidth=0.6*cam.z;c.stroke();
            // Flow particle
            const fp=(t*0.2+idx*0.15)%1;
            const fx=sa.x+(sb.x-sa.x)*fp,fy=sa.y+(sb.y-sa.y)*fp;
            c.beginPath();c.arc(fx,fy,1*cam.z,0,Math.PI*2);
            c.fillStyle='rgba(200,169,110,0.25)';c.fill();
        });

        // Nodes
        nodes.forEach((n,i)=>{
            const s=w2s(n.x,n.y);
            if(s.x<-20||s.x>W+20||s.y<-20||s.y>H+20)return;
            const cl=COL[n.tp];
            const sz=n.s*cam.z;
            const pulse=1+Math.sin(t*2+n.ph)*0.1;
            const r=sz*pulse;

            // Glow
            const gr=c.createRadialGradient(s.x,s.y,r*0.3,s.x,s.y,r*2.5);
            gr.addColorStop(0,cl.f+'0.08)');gr.addColorStop(1,cl.f+'0)');
            c.beginPath();c.arc(s.x,s.y,r*2.5,0,Math.PI*2);c.fillStyle=gr;c.fill();

            // Circle
            c.beginPath();c.arc(s.x,s.y,r,0,Math.PI*2);
            c.fillStyle=cl.f+'0.55)';c.fill();

            // Inner dot
            c.beginPath();c.arc(s.x,s.y,r*0.35,0,Math.PI*2);
            c.fillStyle=cl.f+'0.9)';c.fill();

            // Labels — show for bigger nodes or when zoomed
            if(cam.z>1.2 || n.s>=6){
                const fs=Math.max(7,Math.min(10,8*cam.z));
                c.font=`${n.s>=7?'600':'400'} ${fs}px Inter,sans-serif`;
                c.fillStyle=cl.f+'0.5)';
                c.textAlign='center';
                c.fillText(n.l,s.x,s.y+r+fs+2);
            }
        });

        // Legend (bottom-left inside canvas)
        const leg=[['OrgUnit','#C8A96E'],['Capability','#6EAAC8'],['Process','#8BC86E'],['Role','#C86E8B'],['System','#B08BD4'],['Product','#D4A85B'],['Objective','#5BC8B4'],['Team','#E8ECF1']];
        const legY=H-12;
        let legX=10;
        c.font='500 7px Inter,sans-serif';
        leg.forEach(([label,color])=>{
            c.beginPath();c.arc(legX+3,legY,3,0,Math.PI*2);
            c.fillStyle=color;c.fill();
            c.fillStyle='rgba(232,236,241,0.35)';
            c.textAlign='left';
            c.fillText(label,legX+9,legY+2.5);
            legX+=c.measureText(label).width+18;
        });

        requestAnimationFrame(draw);
    }
    draw();
})();

// ── Rich Semantic Memory CLD for Layer 2 ──
(function(){
    const container = document.getElementById('layerViz2');
    if (!container) return;
    const cvs = document.createElement('canvas');
    const W = 600, H = 375;
    cvs.width = W; cvs.height = H;
    cvs.style.width = '100%'; cvs.style.height = '100%';
    container.appendChild(cvs);
    const c = cvs.getContext('2d');

    const GOLD={r:200,g:169,b:110}, TEAL={r:91,g:200,b:180}, ROSE={r:200,g:110,b:139}, BLUE={r:110,g:170,b:200};
    function rgba(col,a){return `rgba(${col.r},${col.g},${col.b},${a})`;}

    const loops = [
        { name:'Illusion of Control', type:'B', color:ROSE,
          nodes:[{label:'Uncertainty'},{label:'Control'},{label:'Directives'},{label:'Autonomy'},{label:'Adaptation'},{label:'Consequences'}],
          edges:[{f:0,t:1,p:'+'},{f:1,t:2,p:'+'},{f:2,t:3,p:'−'},{f:3,t:4,p:'+'},{f:4,t:5,p:'−'},{f:5,t:0,p:'+'}]},
        { name:'Learning Organization', type:'R', color:TEAL,
          nodes:[{label:'Safety'},{label:'Experiment'},{label:'Learning'},{label:'Decisions'},{label:'Trust'}],
          edges:[{f:0,t:1,p:'+'},{f:1,t:2,p:'+'},{f:2,t:3,p:'+'},{f:3,t:4,p:'+'},{f:4,t:0,p:'+'}]},
        { name:'Restructuring Trap', type:'B', color:BLUE,
          nodes:[{label:'Misalignment'},{label:'Restructuring'},{label:'Disruption'},{label:'Network Loss'},{label:'Knowledge Loss'}],
          edges:[{f:0,t:1,p:'+'},{f:1,t:2,p:'+'},{f:2,t:3,p:'+'},{f:3,t:4,p:'+'},{f:4,t:0,p:'+'}]}
    ];

    // Layout
    const loopSpacing = W / 4;
    loops.forEach((loop,li) => {
        const cx = loopSpacing * (li + 0.75);
        const cy = H / 2;
        const radius = Math.min(W / 5 * 0.35, H * 0.28);
        loop.cx = cx; loop.cy = cy; loop.radius = radius;
        loop.nodes.forEach((node,ni) => {
            const angle = -Math.PI/2 + (ni/loop.nodes.length)*Math.PI*2;
            node.x = cx + Math.cos(angle)*radius;
            node.y = cy + Math.sin(angle)*radius;
            node.bx = node.x; node.by = node.y;
        });
    });

    const STEP=1.2, HOLD=3.0, FADE=1.0, STAGGER=2.5;
    class Anim {
        constructor(loop,delay){this.loop=loop;this.delay=delay;this.time=-delay;this.total=loop.edges.length;this.dur=this.total*STEP+HOLD+FADE;}
        update(dt){this.time+=dt;if(this.time>this.dur)this.time-=this.dur;}
        edgeProg(ei){if(this.time<0)return 0;const s=ei*STEP,e=s+STEP;if(this.time<s)return 0;if(this.time>=e){const fs=this.total*STEP+HOLD;if(this.time>fs)return Math.max(0,1-(this.time-fs)/FADE);return 1;}const t=(this.time-s)/STEP;return t*t*(3-2*t);}
        nodeProg(ni){if(this.time<0)return 0.15;let m=0.15;this.loop.edges.forEach((e,ei)=>{const ep=this.edgeProg(ei);if(e.f===ni)m=Math.max(m,ep*0.7);if(e.t===ni)m=Math.max(m,ep);});return m;}
        flowEdge(){if(this.time<0)return{i:-1,p:0};const rs=this.time/STEP,si=Math.floor(rs);if(si>=this.total)return{i:-1,p:0};const p=rs-si;return{i:si,p:p*p*(3-2*p)};}
        labelAlpha(){if(this.time<0)return 0;const as=this.total*STEP;if(this.time<as-0.3)return 0;if(this.time<as+0.5)return(this.time-as+0.3)/0.8;const fs=as+HOLD;if(this.time>fs)return Math.max(0,1-(this.time-fs)/FADE);return 1;}
    }

    const anims = loops.map((l,i) => new Anim(l, i*STAGGER));
    let gt = 0;

    function draw(){
        const dt = 1/60; gt += dt;
        c.fillStyle='#0B0F14'; c.fillRect(0,0,W,H);

        // Background particles
        for(let i=0;i<20;i++){const px=((gt*8+i*137.5)%(W+40))-20,py=((gt*3+i*89.3)%(H+40))-20;c.beginPath();c.arc(px,py,0.6,0,Math.PI*2);c.fillStyle='rgba(200,169,110,0.03)';c.fill();}

        anims.forEach((anim,ai) => {
            anim.update(dt);
            const loop = anim.loop;
            loop.nodes.forEach((n,ni) => { n.x=n.bx+Math.sin(gt*0.5+ni*1.7+ai*2)*1.5; n.y=n.by+Math.cos(gt*0.4+ni*2.1+ai*3)*1.5; });

            // Edges
            loop.edges.forEach((edge,ei) => {
                const ep = anim.edgeProg(ei); if(ep<0.01) return;
                const fn=loop.nodes[edge.f], tn=loop.nodes[edge.t];
                const dx=tn.x-fn.x,dy=tn.y-fn.y,d=Math.sqrt(dx*dx+dy*dy),nr=18;
                const r1=nr/d,r2=(d-nr-6)/d;
                const sx=fn.x+dx*r1,sy=fn.y+dy*r1,ex=fn.x+dx*r2,ey=fn.y+dy*r2;
                c.beginPath();c.moveTo(sx,sy);c.lineTo(ex,ey);c.strokeStyle=rgba(loop.color,ep*0.5);c.lineWidth=ep>0.8?1.5:1;c.stroke();
                // Arrowhead
                const a=Math.atan2(ey-sy,ex-sx),hl=6;c.beginPath();c.moveTo(ex,ey);c.lineTo(ex-Math.cos(a-0.35)*hl,ey-Math.sin(a-0.35)*hl);c.lineTo(ex-Math.cos(a+0.35)*hl,ey-Math.sin(a+0.35)*hl);c.closePath();c.fillStyle=rgba(loop.color,ep*0.5);c.fill();
                // Polarity label
                if(ep>0.3){const mx=(fn.x+tn.x)/2,my=(fn.y+tn.y)/2,px2=-dy/d*10,py2=dx/d*10;c.font='700 9px Inter,sans-serif';c.fillStyle=rgba(loop.color,ep*0.7);c.textAlign='center';c.textBaseline='middle';c.fillText(edge.p,mx+px2,my+py2);}
            });

            // Flow particle
            const fl = anim.flowEdge();
            if(fl.i>=0){const edge=loop.edges[fl.i],fn=loop.nodes[edge.f],tn=loop.nodes[edge.t];const dx=tn.x-fn.x,dy=tn.y-fn.y,d=Math.sqrt(dx*dx+dy*dy),nr=18;const r1=nr/d,r2=(d-nr)/d,t2=r1+(r2-r1)*fl.p;const px=fn.x+dx*t2,py=fn.y+dy*t2;const gr=c.createRadialGradient(px,py,0,px,py,8);gr.addColorStop(0,rgba(loop.color,0.8));gr.addColorStop(1,rgba(loop.color,0));c.beginPath();c.arc(px,py,8,0,Math.PI*2);c.fillStyle=gr;c.fill();c.beginPath();c.arc(px,py,2,0,Math.PI*2);c.fillStyle=rgba(loop.color,1);c.fill();}

            // Nodes
            loop.nodes.forEach((node,ni) => {
                const np = anim.nodeProg(ni), active = np>0.6, r = active?18:15;
                if(np>0.2){const gr=c.createRadialGradient(node.x,node.y,r*0.5,node.x,node.y,r*2.5);gr.addColorStop(0,rgba(loop.color,np*0.1));gr.addColorStop(1,rgba(loop.color,0));c.beginPath();c.arc(node.x,node.y,r*2.5,0,Math.PI*2);c.fillStyle=gr;c.fill();}
                c.beginPath();c.arc(node.x,node.y,r,0,Math.PI*2);c.strokeStyle=rgba(loop.color,np*0.5);c.lineWidth=active?1.5:0.8;c.stroke();
                c.beginPath();c.arc(node.x,node.y,r-1,0,Math.PI*2);c.fillStyle=rgba(loop.color,np*0.06);c.fill();
                if(np>0.5){c.beginPath();c.arc(node.x,node.y,2.5,0,Math.PI*2);c.fillStyle=rgba(loop.color,np*0.8);c.fill();}
                c.font=`${active?'600':'400'} 7px Inter,sans-serif`;c.fillStyle=rgba(loop.color,np*0.75);c.textAlign='center';c.textBaseline='middle';c.fillText(node.label,node.x,node.y);
            });

            // Center badge
            const la = Math.max(0.15, anim.labelAlpha());
            c.beginPath();c.arc(loop.cx,loop.cy,12,0,Math.PI*2);c.strokeStyle=rgba(loop.color,la*0.3);c.lineWidth=0.8;c.stroke();
            c.font='700 10px Inter,sans-serif';c.fillStyle=rgba(loop.color,la*0.6);c.textAlign='center';c.textBaseline='middle';c.fillText(loop.type,loop.cx,loop.cy);

            // Title
            const tla = anim.labelAlpha();
            if(tla>0.01){c.font='600 8px Inter,sans-serif';c.fillStyle=rgba(loop.color,tla*0.7);c.textAlign='center';c.fillText(loop.name,loop.cx,loop.cy-loop.radius-22);}
        });

        requestAnimationFrame(draw);
    }
    draw();
})();

// ── Rich Tension Engine for Layer 3 ──
(function(){
    const container = document.getElementById('layerViz3');
    if (!container) return;
    const cvs = document.createElement('canvas');
    const W = 600, H = 375;
    cvs.width = W; cvs.height = H;
    cvs.style.width = '100%'; cvs.style.height = '100%';
    container.appendChild(cvs);
    const c = cvs.getContext('2d');

    const GOLD={r:200,g:169,b:110},TEAL={r:91,g:200,b:180},ROSE={r:200,g:110,b:139},BLUE={r:110,g:170,b:200};
    function rgba(col,a){return `rgba(${col.r},${col.g},${col.b},${a})`;}

    const tensions = [
        {name:'Strategy ↔ Execution',angle:0,color:GOLD,severity:0.4,narratives:['vision lacks clarity','strategic drift']},
        {name:'Control ↔ Autonomy',angle:Math.PI/3,color:TEAL,severity:0.6,narratives:['teams feel disconnected','micromanagement']},
        {name:'Efficiency ↔ Innovation',angle:2*Math.PI/3,color:ROSE,severity:0.8,narratives:['competing priorities','time to innovate']},
        {name:'Local ↔ Global',angle:Math.PI,color:BLUE,severity:0.3,narratives:['alignment gaps','local optima']},
        {name:'Short ↔ Long Term',angle:4*Math.PI/3,color:GOLD,severity:0.7,narratives:['quarterly pressure','tech debt']},
        {name:'Stability ↔ Adaptability',angle:5*Math.PI/3,color:TEAL,severity:0.5,narratives:['resistance to change','change fatigue']}
    ];

    // Flowing particles per tension
    const particles = [];
    tensions.forEach((t,ti) => { for(let i=0;i<6;i++) particles.push({ti,prog:Math.random(),spd:0.004+Math.random()*0.005,r:0.8+Math.random()*1.2}); });

    // Floating narratives
    const floats = [];
    let lastFloat = 0;

    let gt = 0;
    function draw(){
        gt += 1/60;
        c.fillStyle='#0B0F14'; c.fillRect(0,0,W,H);

        // Background particles
        for(let i=0;i<15;i++){const px=((gt*6+i*137.5)%(W+40))-20,py=((gt*2.5+i*89.3)%(H+40))-20;c.beginPath();c.arc(px,py,0.5,0,Math.PI*2);c.fillStyle='rgba(200,169,110,0.03)';c.fill();}

        const cx = W/2, cy = H/2, radius = Math.min(W,H)*0.28;

        tensions.forEach((t,ti) => {
            const breathe = Math.sin(gt*1.5+ti)*0.15;
            const flare = Math.max(0, Math.sin(gt*0.8+t.angle)*0.3);
            let sev = Math.min(1, t.severity + breathe + flare);

            let wc = sev > 0.7 ? ROSE : sev > 0.4 ? GOLD : TEAL;

            const p1x=cx+Math.cos(t.angle)*radius, p1y=cy+Math.sin(t.angle)*radius;
            const p2x=cx-Math.cos(t.angle)*radius, p2y=cy-Math.sin(t.angle)*radius;

            // Tension wire
            c.save();
            c.strokeStyle=rgba(wc,0.3+sev*0.4); c.lineWidth=1+sev*2;
            c.setLineDash([3,3]); c.lineDashOffset=-gt*40;
            c.beginPath();c.moveTo(p1x,p1y);c.lineTo(cx,cy);c.lineTo(p2x,p2y);c.stroke();
            c.setLineDash([]);
            c.restore();

            // Poles
            const pr = 4+sev*3;
            [p1x,p2x].forEach((px,pi) => {
                const py = pi===0?p1y:p2y;
                c.beginPath();c.arc(px,py,pr,0,Math.PI*2);c.fillStyle=rgba(wc,0.8);c.fill();
                c.beginPath();c.arc(px,py,pr+2,0,Math.PI*2);c.strokeStyle=rgba(wc,0.3);c.lineWidth=0.5;c.stroke();
            });

            // Tension name label
            const lx = cx + Math.cos(t.angle)*(radius+20);
            const ly = cy + Math.sin(t.angle)*(radius+20);
            c.font='400 7px Inter,sans-serif'; c.fillStyle=rgba(wc,0.5); c.textAlign='center'; c.textBaseline='middle';
            c.fillText(t.name, lx, ly);
        });

        // Flowing particles
        particles.forEach(p => {
            p.prog += p.spd; if(p.prog>1) p.prog=0;
            const t = tensions[p.ti];
            const p1x=cx+Math.cos(t.angle)*radius,p1y=cy+Math.sin(t.angle)*radius;
            const p2x=cx-Math.cos(t.angle)*radius,p2y=cy-Math.sin(t.angle)*radius;
            const bx=p1x+(p2x-p1x)*p.prog,by=p1y+(p2y-p1y)*p.prog;
            const osc=Math.sin(p.prog*Math.PI*4)*5;
            const px=bx+(-Math.sin(t.angle))*osc,py=by+(Math.cos(t.angle))*osc;
            c.beginPath();c.arc(px,py,p.r,0,Math.PI*2);c.fillStyle=rgba(t.color,0.4);c.fill();
        });

        // Central indicator
        c.beginPath();c.arc(cx,cy,22,0,Math.PI*2);c.fillStyle='rgba(30,50,70,0.7)';c.fill();
        c.beginPath();c.arc(cx,cy,22,0,Math.PI*2);c.strokeStyle=rgba(BLUE,0.4);c.lineWidth=1;c.stroke();
        const avgSev = tensions.reduce((s,t)=>s+t.severity,0)/tensions.length;
        const health = Math.round((1-avgSev-Math.sin(gt*1.2)*0.1)*100);
        c.font='700 10px Inter,sans-serif';c.fillStyle=rgba(BLUE,0.8);c.textAlign='center';c.textBaseline='middle';c.fillText(health,cx,cy-3);
        c.font='400 6px Inter,sans-serif';c.fillStyle=rgba(TEAL,0.5);c.fillText('health',cx,cy+7);

        // Floating micro-narratives
        const now = gt;
        if(now - lastFloat > 2.5){
            const rt = tensions[Math.floor(Math.random()*tensions.length)];
            const a = rt.angle + (Math.random()-0.5)*0.5;
            const nr = rt.narratives[Math.floor(Math.random()*rt.narratives.length)];
            floats.push({x:cx+Math.cos(a)*(radius*1.3),y:cy+Math.sin(a)*(radius*1.3),text:nr,color:rt.color,born:now,life:3+Math.random()});
            lastFloat = now;
        }
        for(let i=floats.length-1;i>=0;i--){
            const f=floats[i], age=(now-f.born)/f.life;
            if(age>1){floats.splice(i,1);continue;}
            const alpha = age<0.2?age/0.2 : age>0.8?(1-age)/0.2 : 1;
            f.y -= 0.3;
            c.font='400 7px Inter,sans-serif';c.fillStyle=rgba(f.color,alpha*0.5);c.textAlign='center';c.fillText(f.text,f.x,f.y);
        }

        requestAnimationFrame(draw);
    }
    draw();
})();

// ── Rich Simulation Sandbox for Layer 4 ──
(function(){
    const container = document.getElementById('layerViz4');
    if (!container) return;
    const cvs = document.createElement('canvas');
    const W = 600, H = 375;
    cvs.width = W; cvs.height = H;
    cvs.style.width = '100%'; cvs.style.height = '100%';
    container.appendChild(cvs);
    const c = cvs.getContext('2d');

    const COL = {gold:'rgba(200,169,110,',teal:'rgba(91,200,180,',rose:'rgba(200,110,139,',blue:'rgba(110,170,200,'};

    const states = [
        { name:'Current', nodes:[
            {id:'ceo',l:'CEO',tp:0},{id:'cto',l:'CTO',tp:0},{id:'cpo',l:'Product',tp:0},
            {id:'eng',l:'Eng Lead',tp:1},{id:'pm',l:'PM',tp:1},{id:'design',l:'Design',tp:1},
            {id:'back',l:'Backend',tp:2},{id:'front',l:'Frontend',tp:2},{id:'analytics',l:'Analytics',tp:2},
            {id:'infra',l:'Infra',tp:2},{id:'data',l:'Data',tp:2}],
          edges:[[0,1],[0,2],[1,3],[2,4],[2,5],[3,6],[3,7],[4,8],[1,9],[6,10]]},
        { name:'Platform Eng', nodes:[
            {id:'ceo',l:'CEO',tp:0},{id:'cto',l:'CTO',tp:0},{id:'plat',l:'Platform',tp:0},
            {id:'eng',l:'Eng Lead',tp:1},{id:'platmgr',l:'Plat Mgr',tp:1},{id:'pm',l:'PM',tp:1},
            {id:'back',l:'Backend',tp:2},{id:'front',l:'Frontend',tp:2},{id:'infra',l:'Infra',tp:2},
            {id:'observe',l:'Observability',tp:2},{id:'analytics',l:'Analytics',tp:2}],
          edges:[[0,1],[0,2],[1,3],[2,4],[4,8],[4,9],[3,6],[3,7],[5,10],[1,2]]},
        { name:'Data Org', nodes:[
            {id:'ceo',l:'CEO',tp:0},{id:'cto',l:'CTO',tp:0},{id:'cdo',l:'Data Officer',tp:0},
            {id:'eng',l:'Eng Lead',tp:1},{id:'datalead',l:'Data Lead',tp:1},{id:'pm',l:'PM',tp:1},
            {id:'back',l:'Backend',tp:2},{id:'front',l:'Frontend',tp:2},{id:'analytics',l:'Analytics',tp:2},
            {id:'ml',l:'ML Pipeline',tp:2},{id:'dataops',l:'Data Ops',tp:2}],
          edges:[[0,1],[0,2],[1,3],[2,4],[3,6],[3,7],[4,8],[4,9],[4,10],[5,8]]}
    ];

    const typeColors = [COL.gold, COL.rose, COL.teal];
    let stateIdx = 0, nextIdx = 1, transition = 0, holdTimer = 0;
    let positions = {}, targetPositions = {};

    function layout(state){
        const pos = {};
        state.nodes.forEach((n,i) => {
            const angle = (i/state.nodes.length)*Math.PI*2;
            const r = n.tp===0?60:120+Math.random()*40;
            pos[n.id] = {x:W/2+Math.cos(angle)*r+(Math.random()-0.5)*30, y:H/2+Math.sin(angle)*r+(Math.random()-0.5)*30};
        });
        // Force iterations
        for(let iter=0;iter<30;iter++){
            state.nodes.forEach((n,i)=>{state.nodes.forEach((m,j)=>{if(i>=j)return;const p1=pos[n.id],p2=pos[m.id];const dx=p2.x-p1.x,dy=p2.y-p1.y,d=Math.max(10,Math.sqrt(dx*dx+dy*dy));const f=-80/(d*d);p1.x+=dx/d*f;p1.y+=dy/d*f;p2.x-=dx/d*f;p2.y-=dy/d*f;});});
            state.edges.forEach(e=>{const p1=pos[state.nodes[e[0]].id],p2=pos[state.nodes[e[1]].id];const dx=p2.x-p1.x,dy=p2.y-p1.y,d=Math.max(1,Math.sqrt(dx*dx+dy*dy));const f=(d-70)*0.05;p1.x+=dx/d*f;p1.y+=dy/d*f;p2.x-=dx/d*f;p2.y-=dy/d*f;});
            Object.values(pos).forEach(p=>{p.x+=(W/2-p.x)*0.01;p.y+=(H/2-p.y)*0.01;p.x=Math.max(40,Math.min(W-40,p.x));p.y=Math.max(30,Math.min(H-30,p.y));});
        }
        return pos;
    }

    positions = layout(states[0]);
    targetPositions = {...positions};

    let gt = 0, mutLabel = '', mutAlpha = 0;
    function draw(){
        gt += 1/60;
        c.fillStyle='#0B0F14'; c.fillRect(0,0,W,H);

        // Grid
        c.strokeStyle='rgba(200,169,110,0.03)';c.lineWidth=0.5;
        for(let x=0;x<W;x+=50){c.beginPath();c.moveTo(x,0);c.lineTo(x,H);c.stroke();}
        for(let y=0;y<H;y+=50){c.beginPath();c.moveTo(0,y);c.lineTo(W,y);c.stroke();}

        // Background particles
        for(let i=0;i<12;i++){const px=((gt*5+i*100)%(W+20))-10,py=((gt*2+i*70)%(H+20))-10;c.beginPath();c.arc(px,py,0.5,0,Math.PI*2);c.fillStyle='rgba(91,200,180,0.04)';c.fill();}

        holdTimer += 1/60;
        if(transition < 1){
            transition = Math.min(1, transition + 0.008);
            // Lerp positions
            const st = states[stateIdx];
            st.nodes.forEach(n => {
                if(positions[n.id]&&targetPositions[n.id]){
                    positions[n.id].x += (targetPositions[n.id].x-positions[n.id].x)*0.03;
                    positions[n.id].y += (targetPositions[n.id].y-positions[n.id].y)*0.03;
                }
            });
        } else {
            if(holdTimer > 4){
                holdTimer = 0; transition = 0;
                stateIdx = nextIdx; nextIdx = (nextIdx+1)%states.length;
                targetPositions = layout(states[stateIdx]);
                mutLabel = states[stateIdx].name;
                mutAlpha = 1;
            }
        }
        mutAlpha = Math.max(0, mutAlpha - 0.005);

        const st = states[stateIdx];
        // Edges
        st.edges.forEach(e => {
            const n1=st.nodes[e[0]], n2=st.nodes[e[1]];
            const p1=positions[n1.id]||targetPositions[n1.id], p2=positions[n2.id]||targetPositions[n2.id];
            if(!p1||!p2)return;
            c.beginPath();c.moveTo(p1.x,p1.y);c.lineTo(p2.x,p2.y);
            c.strokeStyle='rgba(91,200,180,'+(0.15+Math.sin(gt+e[0])*0.05)+')';c.lineWidth=1;c.stroke();
        });

        // Nodes
        st.nodes.forEach(n => {
            const p = positions[n.id]||targetPositions[n.id]; if(!p) return;
            const r = n.tp===0?8:n.tp===1?6:5;
            const col = typeColors[n.tp];
            c.beginPath();c.arc(p.x,p.y,r*1.5,0,Math.PI*2);c.fillStyle=col+'0.12)';c.fill();
            c.beginPath();c.arc(p.x,p.y,r,0,Math.PI*2);c.fillStyle=col+'0.7)';c.fill();
            c.font='400 7px Inter,sans-serif';c.fillStyle=col+'0.4)';c.textAlign='center';c.fillText(n.l,p.x,p.y+r+10);
        });

        // Mutation label
        if(mutAlpha>0.01){c.font='500 9px Inter,sans-serif';c.fillStyle='rgba(91,200,180,'+mutAlpha*0.7+')';c.textAlign='center';c.fillText('Scenario: '+mutLabel,W/2,H-20);}

        // State indicator
        c.font='400 7px Inter,sans-serif';c.fillStyle='rgba(200,169,110,0.3)';c.textAlign='left';c.fillText(states[stateIdx].name,8,14);

        requestAnimationFrame(draw);
    }
    draw();
})();

// ── Rich Experiment Lab for Layer 5 ──
(function(){
    const container = document.getElementById('layerViz5');
    if (!container) return;
    const cvs = document.createElement('canvas');
    const W = 600, H = 375;
    cvs.width = W; cvs.height = H;
    cvs.style.width = '100%'; cvs.style.height = '100%';
    container.appendChild(cvs);
    const c = cvs.getContext('2d');

    const TEAL={r:91,g:200,b:180},GOLD={r:200,g:169,b:110},ROSE={r:200,g:110,b:139},BLUE={r:110,g:170,b:200};
    function rgba(col,a){return `rgba(${col.r},${col.g},${col.b},${a})`;}

    const columns = ['Hypothesis','Design','Running','Validated'];
    const experiments = [
        {label:'Cross-team standup',col:TEAL},{label:'Async decisions',col:GOLD},{label:'Rotate PO',col:ROSE},
        {label:'Merge support teams',col:TEAL},{label:'Weekly retro',col:GOLD},{label:'Shared OKRs',col:TEAL},
        {label:'Pair facilitation',col:ROSE},{label:'Decision framework',col:GOLD},{label:'Feedback loops',col:TEAL},
        {label:'Autonomy zones',col:ROSE},{label:'WIP limits',col:BLUE},{label:'Skill matrix',col:GOLD}
    ];

    // Cards: {exp, colIdx, y, progress, checkmark}
    let cards = [];
    let gt = 0, lastMove = 0, lastAdd = 0;

    function initCards(){
        cards = [];
        const per = [3,2,2,1];
        let ei = 0;
        per.forEach((count,ci) => {
            for(let i=0;i<count && ei<experiments.length;i++,ei++){
                cards.push({exp:experiments[ei], colIdx:ci, slot:i, progress:ci===2?Math.random()*60:ci===3?100:0, checkmark:ci===3});
            }
        });
    }
    initCards();

    function draw(){
        gt += 1/60;
        c.fillStyle='#0B0F14'; c.fillRect(0,0,W,H);

        // Background
        for(let i=0;i<10;i++){const px=((gt*5+i*130)%(W+20))-10,py=((gt*2+i*80)%(H+20))-10;c.beginPath();c.arc(px,py,0.5,0,Math.PI*2);c.fillStyle='rgba(91,200,180,0.03)';c.fill();}

        // Helix lines (subtle)
        c.strokeStyle='rgba(200,169,110,0.02)';c.lineWidth=0.5;
        for(let l=0;l<3;l++){const sx=W/4*(l+1);c.beginPath();for(let y=0;y<H;y+=3){const x=sx+Math.sin(y*0.015+gt*0.5)*15;if(y===0)c.moveTo(x,y);else c.lineTo(x,y);}c.stroke();}

        const colW = (W-40)/4, colX = 15;

        // Draw columns
        columns.forEach((col,ci) => {
            const x = colX + ci*colW;
            // Column bg
            c.fillStyle='rgba(15,25,40,0.25)';
            c.beginPath();c.roundRect(x,25,colW-10,H-45,6);c.fill();
            c.strokeStyle='rgba(91,200,180,0.08)';c.lineWidth=0.5;c.beginPath();c.roundRect(x,25,colW-10,H-45,6);c.stroke();
            // Header
            c.font='600 8px Inter,sans-serif';c.fillStyle=rgba(TEAL,0.5);c.textAlign='center';c.fillText(col.toUpperCase(),x+(colW-10)/2,42);
            // Separator
            c.beginPath();c.moveTo(x+8,50);c.lineTo(x+colW-18,50);c.strokeStyle='rgba(91,200,180,0.1)';c.stroke();
        });

        // Draw cards
        const colCards = [[],[],[],[]];
        cards.forEach(cd => colCards[cd.colIdx].push(cd));

        colCards.forEach((cc,ci) => {
            cc.forEach((cd,si) => {
                const x = colX + ci*colW + 5;
                const y = 58 + si * 48;
                const w = colW - 20, h = 40;

                // Card background
                c.fillStyle='rgba(20,35,55,0.7)';
                c.beginPath();c.roundRect(x,y,w,h,4);c.fill();
                c.strokeStyle=rgba(cd.exp.col,0.2);c.lineWidth=0.5;c.beginPath();c.roundRect(x,y,w,h,4);c.stroke();

                // Indicator dot
                c.beginPath();c.arc(x+8,y+10,3,0,Math.PI*2);c.fillStyle=rgba(cd.exp.col,0.7);c.fill();

                // Label
                c.font='400 7px Inter,sans-serif';c.fillStyle='rgba(220,230,240,0.6)';c.textAlign='left';c.fillText(cd.exp.label,x+15,y+12);

                // Progress bar for Running
                if(ci === 2){
                    cd.progress = Math.min(100, cd.progress + 0.15);
                    c.fillStyle='rgba(91,200,180,0.1)';c.fillRect(x+5,y+24,w-10,2);
                    c.fillStyle=rgba(TEAL,0.5);c.fillRect(x+5,y+24,(w-10)*cd.progress/100,2);
                }

                // Checkmark for Validated
                if(cd.checkmark){
                    c.font='600 10px Inter,sans-serif';c.fillStyle=rgba(TEAL,0.7);c.textAlign='right';c.fillText('✓',x+w-5,y+12);
                }
            });
        });

        // Move cards periodically
        if(gt - lastMove > 3){
            lastMove = gt;
            // Find a card in Running with progress >= 100
            const running = cards.filter(cd => cd.colIdx===2 && cd.progress>=100);
            if(running.length > 0){
                running[0].colIdx = 3; running[0].checkmark = true; running[0].progress = 100;
            } else {
                // Move a random card forward
                const movable = cards.filter(cd => cd.colIdx < 3);
                if(movable.length > 0){
                    const cd = movable[Math.floor(Math.random()*movable.length)];
                    cd.colIdx++;
                    if(cd.colIdx===2) cd.progress = 0;
                    if(cd.colIdx===3) cd.checkmark = true;
                }
            }
        }

        // Add new cards periodically
        if(gt - lastAdd > 6){
            lastAdd = gt;
            const hyp = cards.filter(cd=>cd.colIdx===0);
            if(hyp.length < 4){
                const exp = experiments[Math.floor(Math.random()*experiments.length)];
                cards.push({exp,colIdx:0,slot:hyp.length,progress:0,checkmark:false});
            }
        }

        requestAnimationFrame(draw);
    }
    draw();
})();

// ── Rich Reinforcement Learning for Layer 6 ──
(function(){
    const container = document.getElementById('layerViz6');
    if (!container) return;
    const cvs = document.createElement('canvas');
    const W = 600, H = 375;
    cvs.width = W; cvs.height = H;
    cvs.style.width = '100%'; cvs.style.height = '100%';
    container.appendChild(cvs);
    const c = cvs.getContext('2d');

    const GOLD={r:200,g:169,b:110},TEAL={r:91,g:200,b:180},ROSE={r:200,g:110,b:139},BLUE={r:110,g:170,b:200};
    function rgba(col,a){return `rgba(${col.r},${col.g},${col.b},${a})`;}

    const totalCycles = 8;
    const dataPoints = [];
    let predAcc = 0.62;
    for(let i=0;i<totalCycles;i++){
        const noise = (Math.random()-0.5)*0.1;
        const pred = Math.min(1,Math.max(0,predAcc+noise));
        const outcome = Math.min(1,Math.max(0,predAcc+(Math.random()-0.5)*0.15));
        const correct = Math.abs(pred-outcome)<0.08;
        dataPoints.push({pred,outcome,correct});
        predAcc += 0.04;
    }

    // Network nodes background
    const netNodes = [];
    for(let layer=0;layer<4;layer++){for(let i=0;i<6;i++){netNodes.push({x:(W/(5))*(layer+1),y:(H/(7))*(i+1),layer,r:1+Math.random()*1.5,ba:0.05+Math.random()*0.08});}}

    // Floating text
    const floatTexts = ['Pattern learned','Risk confirmed ✓','Signal detected','Prediction adjusted'];
    const floats = [];
    let lastFloatT = 0;

    let gt = 0;
    const cycleDur = 6; // seconds per full chart cycle

    function draw(){
        gt += 1/60;
        c.fillStyle='#0B0F14'; c.fillRect(0,0,W,H);

        // Background particles
        for(let i=0;i<12;i++){const px=((gt*5+i*120)%(W+20))-10,py=((gt*2+i*75)%(H+20))-10;c.beginPath();c.arc(px,py,0.5,0,Math.PI*2);c.fillStyle='rgba(91,200,180,0.03)';c.fill();}

        // Network nodes
        netNodes.forEach(n => {
            const pulse = Math.sin(gt*2+n.layer*0.5)*0.5+0.5;
            c.fillStyle=rgba(BLUE,n.ba*pulse); c.beginPath();c.arc(n.x,n.y,n.r,0,Math.PI*2);c.fill();
            // Random connections
            if(Math.random()>0.97 && n.layer<3){
                const next = netNodes.filter(nn=>nn.layer===n.layer+1);
                const nn = next[Math.floor(Math.random()*next.length)];
                if(nn){c.strokeStyle=rgba(BLUE,0.05);c.lineWidth=0.3;c.beginPath();c.moveTo(n.x,n.y);c.lineTo(nn.x,nn.y);c.stroke();}
            }
        });

        // Chart area
        const cTop = 50, cBot = H - 80, cLeft = 60, cRight = W - 40;
        const cH = cBot - cTop;

        // Grid
        c.strokeStyle='rgba(91,200,180,0.04)';c.lineWidth=0.5;
        for(let i=0;i<=5;i++){const y=cTop+cH/5*i;c.beginPath();c.moveTo(cLeft,y);c.lineTo(cRight,y);c.stroke();}

        // Animated cycle progress
        const cycleProgress = (gt % cycleDur) / cycleDur;
        const visible = Math.floor(cycleProgress * totalCycles) + 1;

        // Prediction curve (gold dashed)
        const predPts = [], outPts = [];
        for(let i=0;i<visible && i<dataPoints.length;i++){
            const dp = dataPoints[i];
            const x = cLeft + ((i+1)/totalCycles)*(cRight-cLeft);
            predPts.push({x,y:cBot-dp.pred*cH});
            const outDelay = 0.3;
            if(cycleProgress-(i/totalCycles) > outDelay) outPts.push({x,y:cBot-dp.outcome*cH,correct:dp.correct});
        }

        if(predPts.length>0){
            c.strokeStyle=rgba(GOLD,0.8);c.lineWidth=1.5;c.setLineDash([4,4]);
            c.beginPath();c.moveTo(predPts[0].x,predPts[0].y);predPts.forEach(p=>c.lineTo(p.x,p.y));c.stroke();c.setLineDash([]);
            predPts.forEach(p=>{c.beginPath();c.arc(p.x,p.y,2,0,Math.PI*2);c.fillStyle=rgba(GOLD,0.8);c.fill();});
        }
        if(outPts.length>0){
            c.strokeStyle=rgba(TEAL,0.8);c.lineWidth=1.5;
            c.beginPath();c.moveTo(outPts[0].x,outPts[0].y);outPts.forEach(p=>c.lineTo(p.x,p.y));c.stroke();
            outPts.forEach(p=>{
                if(p.correct){c.fillStyle=rgba(TEAL,0.2);c.beginPath();c.arc(p.x,p.y,5,0,Math.PI*2);c.fill();}
                else{c.fillStyle=rgba(ROSE,0.15);c.beginPath();c.arc(p.x,p.y,5,0,Math.PI*2);c.fill();}
                c.beginPath();c.arc(p.x,p.y,2,0,Math.PI*2);c.fillStyle=rgba(TEAL,0.8);c.fill();
            });
        }

        // Cycle labels
        c.font='400 7px Inter,sans-serif';c.fillStyle=rgba(TEAL,0.3);c.textAlign='center';
        for(let i=0;i<totalCycles;i++){const x=cLeft+((i+1)/totalCycles)*(cRight-cLeft);c.fillText('C'+(i+1),x,cBot+14);}

        // Legend
        c.font='500 7px Inter,sans-serif';c.textAlign='left';
        c.setLineDash([3,3]);c.strokeStyle=rgba(GOLD,0.6);c.lineWidth=1;c.beginPath();c.moveTo(cLeft,cTop-15);c.lineTo(cLeft+15,cTop-15);c.stroke();c.setLineDash([]);
        c.fillStyle=rgba(GOLD,0.6);c.fillText('Prediction',cLeft+20,cTop-12);
        c.strokeStyle=rgba(TEAL,0.6);c.lineWidth=1;c.beginPath();c.moveTo(cLeft+90,cTop-15);c.lineTo(cLeft+105,cTop-15);c.stroke();
        c.fillStyle=rgba(TEAL,0.6);c.fillText('Outcome',cLeft+110,cTop-12);

        // Accuracy counter
        const accuracy = Math.floor(62 + (94-62)*cycleProgress);
        c.font='700 20px Inter,sans-serif';c.fillStyle=rgba(GOLD,0.7);c.textAlign='center';c.fillText(accuracy+'%',W/2,H-35);
        c.font='400 8px Inter,sans-serif';c.fillStyle=rgba(TEAL,0.4);c.fillText('MODEL ACCURACY',W/2,H-20);

        // Pattern dots
        const numDots = Math.ceil(cycleProgress*12);
        const dotStart = W/2 - numDots*6;
        for(let i=0;i<numDots;i++){c.beginPath();c.arc(dotStart+i*12,H-50,2,0,Math.PI*2);c.fillStyle=rgba(TEAL,0.3+Math.sin(gt+i)*0.15);c.fill();}

        // Floating text
        if(gt-lastFloatT>1.5){lastFloatT=gt;floats.push({text:floatTexts[Math.floor(Math.random()*floatTexts.length)],x:Math.random()*W*0.6+W*0.2,y:cBot+30,vy:-0.6,born:gt,life:2});}
        for(let i=floats.length-1;i>=0;i--){const f=floats[i],age=(gt-f.born)/f.life;if(age>1){floats.splice(i,1);continue;}f.y+=f.vy;const alpha=age<0.2?age/0.2:age>0.7?(1-age)/0.3:1;c.font='400 7px Inter,sans-serif';c.fillStyle=rgba(TEAL,alpha*0.4);c.textAlign='center';c.fillText(f.text,f.x,f.y);}

        requestAnimationFrame(draw);
    }
    draw();
})();

// ── Rich AI Orchestrator for Layer 7 ──
(function(){
    const container = document.getElementById('layerViz7');
    if (!container) return;
    const cvs = document.createElement('canvas');
    const W = 600, H = 375;
    cvs.width = W; cvs.height = H;
    cvs.style.width = '100%'; cvs.style.height = '100%';
    container.appendChild(cvs);
    const c = cvs.getContext('2d');

    const GOLD={r:200,g:169,b:110},TEAL={r:91,g:200,b:180},ROSE={r:200,g:110,b:139},BLUE={r:110,g:170,b:200},AMBER={r:200,g:140,b:80};
    function rgba(col,a){return `rgba(${col.r},${col.g},${col.b},${a})`;}

    const layers = [
        {name:'Org Graph',color:GOLD,kw:'graph query'},
        {name:'Semantic Memory',color:TEAL,kw:'embeddings'},
        {name:'Tension Engine',color:ROSE,kw:'pattern detect'},
        {name:'Simulation',color:BLUE,kw:'simulation run'},
        {name:'Experiment Lab',color:TEAL,kw:'experiment'},
        {name:'Reinforcement',color:AMBER,kw:'learning'}
    ];

    const bubbles = [
        {text:'What pattern do you see?',type:'question'},
        {text:'3 teams share this tension',type:'response'},
        {text:'Have you considered...',type:'question'},
        {text:'Connecting signals',type:'status'},
        {text:'Systemic archetype found',type:'insight'},
        {text:'Is this a root cause?',type:'challenge'}
    ];
    const typeColors = {question:GOLD,response:TEAL,status:BLUE,insight:AMBER,challenge:ROSE};

    const dataParticles = [];
    const activeBubbles = [];
    let activeLayer = 0, gt = 0, lastBubble = 0, lastQuery = 0, bubbleIdx = 0;

    function draw(){
        gt += 1/60;
        c.fillStyle='#0B0F14'; c.fillRect(0,0,W,H);

        const cx = W/2, cy = H/2, dist = 120;

        // Background particles
        for(let i=0;i<12;i++){const px=((gt*6+i*110)%(W+20))-10,py=((gt*2+i*80)%(H+20))-10;c.beginPath();c.arc(px,py,0.5,0,Math.PI*2);c.fillStyle=rgba(GOLD,0.03);c.fill();}

        // Neural pathways
        layers.forEach((l,i) => {
            const angle = (i/6)*Math.PI*2 - Math.PI/2;
            const x = cx + Math.cos(angle)*dist, y = cy + Math.sin(angle)*dist;
            const isActive = i === activeLayer;
            c.beginPath();c.moveTo(cx,cy);c.lineTo(x,y);c.strokeStyle=rgba(l.color,isActive?0.4:0.1);c.lineWidth=isActive?1.5:0.5;c.stroke();
        });

        // Ripple waves
        for(let i=0;i<3;i++){const phase=(gt*0.3+i*0.35)%1;const r=phase*130;const alpha=Math.max(0,1-phase)*0.15;c.beginPath();c.arc(cx,cy,r,0,Math.PI*2);c.strokeStyle=rgba(GOLD,alpha);c.lineWidth=0.5;c.stroke();}

        // Data particles
        if(gt - lastQuery > 3){
            lastQuery = gt;
            activeLayer = (activeLayer+1)%6;
            const l = layers[activeLayer];
            const angle = (activeLayer/6)*Math.PI*2 - Math.PI/2;
            const ex = cx+Math.cos(angle)*dist, ey = cy+Math.sin(angle)*dist;
            for(let i=0;i<4;i++) dataParticles.push({x:cx,y:cy,ex,ey,prog:0,spd:0.01+Math.random()*0.015,color:l.color,sz:1.5+Math.random()*1.5});
        }
        for(let i=dataParticles.length-1;i>=0;i--){
            const p=dataParticles[i]; p.prog+=p.spd;
            if(p.prog>=1){dataParticles.splice(i,1);continue;}
            const px=p.x+(p.ex-p.x)*p.prog, py=p.y+(p.ey-p.y)*p.prog;
            const alpha=Math.sin(p.prog*Math.PI)*0.7;
            c.beginPath();c.arc(px,py,p.sz,0,Math.PI*2);c.fillStyle=rgba(p.color,alpha);c.fill();
        }

        // Central orb
        const breathe = 1 + Math.sin(gt*3)*0.12;
        const orbR = 16*breathe;
        // Glow rings
        for(let i=0;i<3;i++){const r=orbR*2+i*10;const a=(0.15-i*0.04)*Math.abs(Math.sin(gt*2));c.beginPath();c.arc(cx,cy,r,0,Math.PI*2);c.strokeStyle=rgba(GOLD,a);c.lineWidth=1;c.stroke();}
        // Core
        const gr = c.createRadialGradient(cx,cy,0,cx,cy,orbR);gr.addColorStop(0,rgba(GOLD,0.9));gr.addColorStop(1,rgba(GOLD,0.3));
        c.beginPath();c.arc(cx,cy,orbR,0,Math.PI*2);c.fillStyle=gr;c.fill();

        // Satellite nodes
        layers.forEach((l,i) => {
            const angle = (i/6)*Math.PI*2 - Math.PI/2;
            const x = cx + Math.cos(angle)*dist, y = cy + Math.sin(angle)*dist;
            const isActive = i === activeLayer;
            const nr = isActive?7:4;

            if(isActive){c.beginPath();c.arc(x,y,10,0,Math.PI*2);c.strokeStyle=rgba(l.color,0.7);c.lineWidth=1;c.stroke();}
            c.beginPath();c.arc(x,y,nr,0,Math.PI*2);c.fillStyle=rgba(l.color,0.8);c.fill();

            // Label
            const lx = x+Math.cos(angle)*25, ly = y+Math.sin(angle)*25;
            c.font='400 6px Inter,sans-serif';c.fillStyle=rgba(l.color,0.4);c.textAlign='center';c.textBaseline='middle';c.fillText(l.kw,lx,ly);
        });

        // Conversation bubbles
        if(gt - lastBubble > 3.5){
            lastBubble = gt;
            const b = bubbles[bubbleIdx%bubbles.length];
            activeBubbles.push({...b,born:gt,dur:3.5,x:cx-50+Math.random()*100});
            bubbleIdx++;
        }
        for(let i=activeBubbles.length-1;i>=0;i--){
            const b=activeBubbles[i], age=(gt-b.born)/b.dur;
            if(age>1){activeBubbles.splice(i,1);continue;}
            const by=cy-50+age*100;
            const alpha = age<0.15?age/0.15 : age>0.8?(1-age)/0.2 : 1;
            const col = typeColors[b.type]||GOLD;
            // Bubble bg
            const tw = c.measureText?7*b.text.length*0.5:60;
            const bw = Math.min(120,Math.max(80,tw)), bh = 22;
            c.fillStyle=rgba(col,alpha*0.1);c.beginPath();c.roundRect(b.x-bw/2,by-bh/2,bw,bh,4);c.fill();
            c.strokeStyle=rgba(col,alpha*0.3);c.lineWidth=0.5;c.beginPath();c.roundRect(b.x-bw/2,by-bh/2,bw,bh,4);c.stroke();
            c.font='400 7px Inter,sans-serif';c.fillStyle=rgba(col,alpha*0.7);c.textAlign='center';c.textBaseline='middle';c.fillText(b.text,b.x,by);
        }

        requestAnimationFrame(draw);
    }
    draw();
})();
</script>

<!-- ═══ Opportunity Card Animations ═══ -->
<script>
/* ── How We Deliver · Flow Animation ── */
(function(){
    const c = document.getElementById('hwdFlowCanvas');
    if(!c) return;
    const ctx = c.getContext('2d');
    const W = c.width, H = c.height;
    const GOLD=[200,169,110], TEAL=[91,200,180], ROSE=[200,110,139], BLUE=[110,170,200], AMBER=[200,140,80];
    const zoneW = W/3;

    // ── Generic dense cloud generator ──
    function makeCloud(count, zoneIdx, labels, colors, sizeRange){
        const ox = zoneIdx*zoneW;
        const nodes = [];
        for(let i=0;i<count;i++){
            const col = colors[i%colors.length];
            nodes.push({
                bx: ox + 40 + Math.random()*(zoneW-80),
                by: 25 + Math.random()*(H-50),
                x:0, y:0,
                vx: (Math.random()-0.5)*0.18,
                vy: (Math.random()-0.5)*0.12,
                r: sizeRange[0] + Math.random()*(sizeRange[1]-sizeRange[0]),
                col: col,
                phase: Math.random()*Math.PI*2,
                label: labels ? labels[i%labels.length] : null,
                spring: 0.0003 + Math.random()*0.0003 // rigidity — pull back to base
            });
        }
        // Pre-compute some edges (denser connectivity)
        const edges = [];
        for(let i=0;i<nodes.length;i++){
            for(let j=i+1;j<nodes.length;j++){
                const dx=nodes[i].bx-nodes[j].bx, dy=nodes[i].by-nodes[j].by;
                const d=Math.sqrt(dx*dx+dy*dy);
                if(d<120 && Math.random()<0.55){
                    edges.push([i,j, 0.5+Math.random()*0.5]); // weight
                }
            }
        }
        return {nodes, edges, ox};
    }

    // Zone 1: Meaning
    const meaningLabels = ['Purpose','Growth','Trust','Innovation','Culture','Risk','Autonomy','Alignment','Value','Speed','Quality','Agility','Vision','Belief','Narrative'];
    const z1 = makeCloud(15, 0, meaningLabels, [GOLD,GOLD,AMBER], [2,5]);

    // Zone 2: Architecture — dense, varied colors
    const archLabels = ['Teams','Processes','Capabilities','Roles','Governance','Tech','Data','Products','Services','APIs','Workflows','Units','Skills','Domains','Platforms'];
    const z2 = makeCloud(18, 1, archLabels, [TEAL,BLUE,TEAL,BLUE], [2,6]);

    // Zone 3: Tensions — rose/amber
    const tensionLabels = ['Speed','Quality','Trust','Debt','Growth','Burnout','Risk','Agility','Control','Autonomy','Alignment','Innovation','Friction','Inertia','Leverage'];
    const z3 = makeCloud(16, 2, tensionLabels, [ROSE,AMBER,ROSE,AMBER], [2,5.5]);

    const allZones = [z1,z2,z3];

    // ── Cross-zone signal particles — move in ALL directions ──
    const signals = [];
    function spawnSignal(){
        // Pick random source and target zone
        const sz = Math.floor(Math.random()*3);
        const tz = (sz + (Math.random()<0.5 ? 1 : 2)) % 3;
        const sn = allZones[sz].nodes[Math.floor(Math.random()*allZones[sz].nodes.length)];
        const tn = allZones[tz].nodes[Math.floor(Math.random()*allZones[tz].nodes.length)];
        // Color blend — start with source zone color, end with target zone color
        const scol = sn.col, tcol = tn.col;
        signals.push({
            sx: sn.x||sn.bx, sy: sn.y||sn.by,
            tx: tn.x||tn.bx, ty: tn.y||tn.by,
            p: 0, speed: 0.004 + Math.random()*0.005,
            scol, tcol,
            size: 1.2 + Math.random()*1.5
        });
    }

    let t = 0;

    function updateCloud(zone){
        zone.nodes.forEach(n => {
            // Drift
            n.x = n.bx + n.vx * 100;
            n.y = n.by + n.vy * 100;
            // Slow organic movement
            n.bx += n.vx + Math.sin(t*0.4+n.phase)*0.08;
            n.by += n.vy + Math.cos(t*0.3+n.phase)*0.06;
            // Spring back towards original zone area
            const zoneCenter = zone.ox + zoneW/2;
            const yCent = H/2;
            n.vx += (zoneCenter - n.bx)*n.spring;
            n.vy += (yCent - n.by)*n.spring*0.5;
            // Damping
            n.vx *= 0.995;
            n.vy *= 0.995;
            // Bounds (soft)
            if(n.bx < zone.ox+15) n.vx += 0.02;
            if(n.bx > zone.ox+zoneW-15) n.vx -= 0.02;
            if(n.by < 20) n.vy += 0.02;
            if(n.by > H-15) n.vy -= 0.02;
            n.x = n.bx; n.y = n.by;
        });
    }

    function drawCloud(zone, baseAlpha){
        const {nodes, edges} = zone;
        // Edges
        edges.forEach(([i,j,w])=>{
            const a=nodes[i], b=nodes[j];
            const dx=a.x-b.x, dy=a.y-b.y;
            const d=Math.sqrt(dx*dx+dy*dy);
            if(d>130) return;
            const alpha = Math.max(0,(130-d)/130)*w*baseAlpha*0.2;
            // Use average color
            const col = a.col;
            ctx.strokeStyle=`rgba(${col[0]},${col[1]},${col[2]},${alpha})`;
            ctx.lineWidth=0.6+w*0.6;
            ctx.beginPath(); ctx.moveTo(a.x,a.y); ctx.lineTo(b.x,b.y); ctx.stroke();
        });
        // Nodes
        nodes.forEach(n => {
            const pulse = Math.sin(t*1.0+n.phase)*0.12+0.88;
            const a = baseAlpha * pulse;
            // Glow
            ctx.fillStyle=`rgba(${n.col[0]},${n.col[1]},${n.col[2]},${a*0.06})`;
            ctx.beginPath(); ctx.arc(n.x,n.y,n.r+6,0,Math.PI*2); ctx.fill();
            // Core
            ctx.fillStyle=`rgba(${n.col[0]},${n.col[1]},${n.col[2]},${a*0.55})`;
            ctx.beginPath(); ctx.arc(n.x,n.y,n.r,0,Math.PI*2); ctx.fill();
            // Label
            if(n.label && n.r>3){
                ctx.font='7px Inter, sans-serif';
                ctx.textAlign='center';
                ctx.fillStyle=`rgba(${n.col[0]},${n.col[1]},${n.col[2]},${a*0.35})`;
                ctx.fillText(n.label, n.x, n.y - n.r - 4);
            }
        });
    }

    function draw(){
        t += 0.012;
        ctx.fillStyle = 'rgba(11,15,20,0.92)';
        ctx.fillRect(0,0,W,H);

        // Soft zone dividers (very subtle)
        for(let i=1;i<3;i++){
            const dx = zoneW*i;
            ctx.strokeStyle = 'rgba(200,169,110,0.04)';
            ctx.setLineDash([2,6]);
            ctx.beginPath(); ctx.moveTo(dx,15); ctx.lineTo(dx,H-15); ctx.stroke();
            ctx.setLineDash([]);
        }

        // Zone labels
        ctx.font = 'bold 9px Inter, sans-serif';
        ctx.textAlign = 'center';
        const zLabels = [
            {text:'MEANING', col:GOLD},
            {text:'ARCHITECTURE', col:TEAL},
            {text:'TENSIONS', col:ROSE}
        ];
        zLabels.forEach((z,i)=>{
            ctx.fillStyle = `rgba(${z.col[0]},${z.col[1]},${z.col[2]},0.25)`;
            ctx.fillText(z.text, zoneW*i+zoneW/2, 12);
        });

        // Update and draw all three clouds
        allZones.forEach(z => updateCloud(z));
        allZones.forEach(z => drawCloud(z, 1.0));

        // ── Cross-zone signals ──
        // Spawn new signals
        if(Math.random()<0.08) spawnSignal();

        // Update signals
        for(let i=signals.length-1;i>=0;i--){
            const s = signals[i];
            s.p += s.speed;
            if(s.p>=1){ signals.splice(i,1); continue; }

            // Interpolate position with slight curve
            const u = s.p;
            const bend = Math.sin(u*Math.PI)*20*(Math.sin(t+i)*0.5+0.5);
            const dx = s.tx-s.sx, dy = s.ty-s.sy;
            const len = Math.sqrt(dx*dx+dy*dy)||1;
            const px = -dy/len, py = dx/len;
            const x = s.sx + dx*u + px*bend;
            const y = s.sy + dy*u + py*bend;

            // Color interpolation
            const r = Math.round(s.scol[0]*(1-u)+s.tcol[0]*u);
            const g = Math.round(s.scol[1]*(1-u)+s.tcol[1]*u);
            const b = Math.round(s.scol[2]*(1-u)+s.tcol[2]*u);
            const alpha = Math.sin(u*Math.PI)*0.55;

            // Trail glow
            ctx.fillStyle=`rgba(${r},${g},${b},${alpha*0.15})`;
            ctx.beginPath(); ctx.arc(x,y,s.size+4,0,Math.PI*2); ctx.fill();
            // Core
            ctx.fillStyle=`rgba(${r},${g},${b},${alpha})`;
            ctx.beginPath(); ctx.arc(x,y,s.size,0,Math.PI*2); ctx.fill();
        }

        requestAnimationFrame(draw);
    }
    draw();
})();

/* ── 01 · Paradox of Control ── */
(function(){
    const c = document.getElementById('oppViz1');
    if(!c) return;
    const ctx = c.getContext('2d');
    const W = c.width, H = c.height;
    const GOLD=[200,169,110], TEAL=[91,200,180], ROSE=[200,110,139], BLUE=[110,170,200];
    const BG = [11,15,20];

    // Linear arrows (left side)
    const arrows = [];
    for(let i=0;i<8;i++){
        arrows.push({
            x: 30 + (i/7)*200,
            baseH: 25 + Math.random()*20,
            phase: Math.random()*Math.PI*2
        });
    }

    // Chaos nodes (right side)
    const nodes = [];
    for(let i=0;i<12;i++){
        const a = (i/12)*Math.PI*2;
        nodes.push({
            bx: Math.cos(a)*55, by: Math.sin(a)*40,
            x:0, y:0, phase: i*0.8,
            col: [TEAL,ROSE,BLUE][i%3]
        });
    }

    let t = 0;
    function draw(){
        t += 0.012;
        ctx.fillStyle = 'rgba(11,15,20,0.92)';
        ctx.fillRect(0,0,W,H);

        const hw = W/2;

        // Divider
        ctx.strokeStyle = 'rgba(200,169,110,0.15)';
        ctx.setLineDash([4,4]);
        ctx.beginPath(); ctx.moveTo(hw,8); ctx.lineTo(hw,H-8); ctx.stroke();
        ctx.setLineDash([]);

        // LEFT: grid + arrows
        ctx.strokeStyle = 'rgba(200,169,110,0.05)';
        ctx.lineWidth = 1;
        for(let i=0;i<=5;i++){
            const gy = 20+(i/5)*(H-40);
            ctx.beginPath(); ctx.moveTo(15,gy); ctx.lineTo(hw-15,gy); ctx.stroke();
        }

        // Labels
        ctx.font = '9px Inter, sans-serif';
        ctx.fillStyle = 'rgba(200,169,110,0.25)';
        ctx.textAlign = 'center';
        ctx.fillText('LINEAR ILLUSION', hw/2, H-8);

        arrows.forEach(a => {
            const ah = a.baseH + Math.sin(t*1.5 + a.phase)*4;
            const sx = a.x, sy = H/2;
            ctx.strokeStyle = `rgba(${GOLD[0]},${GOLD[1]},${GOLD[2]},0.5)`;
            ctx.lineWidth = 2;
            ctx.beginPath(); ctx.moveTo(sx,sy+ah*0.3); ctx.lineTo(sx,sy-ah*0.7); ctx.stroke();
            // arrowhead
            ctx.fillStyle = `rgba(${GOLD[0]},${GOLD[1]},${GOLD[2]},0.7)`;
            ctx.beginPath();
            ctx.moveTo(sx,sy-ah*0.7-6);
            ctx.lineTo(sx-3.5,sy-ah*0.7);
            ctx.lineTo(sx+3.5,sy-ah*0.7);
            ctx.fill();
        });

        // RIGHT: chaos network
        ctx.fillStyle = 'rgba(200,169,110,0.25)';
        ctx.fillText('NON-LINEAR REALITY', hw + hw/2, H-8);

        const cx = hw + hw/2, cy = H/2;
        nodes.forEach(n => {
            n.x = n.bx + Math.sin(t*0.6+n.phase)*18 + Math.sin(t*1.1+n.phase*1.7)*8;
            n.y = n.by + Math.cos(t*0.8+n.phase)*14 + Math.cos(t*1.3+n.phase*0.5)*6;
        });

        // Connections
        for(let i=0;i<nodes.length;i++){
            for(let j=i+1;j<nodes.length;j++){
                const dx=nodes[i].x-nodes[j].x, dy=nodes[i].y-nodes[j].y;
                const d = Math.sqrt(dx*dx+dy*dy);
                if(d<75){
                    const a = Math.max(0,(75-d)/75)*0.35;
                    ctx.strokeStyle = `rgba(${TEAL[0]},${TEAL[1]},${TEAL[2]},${a})`;
                    ctx.lineWidth = 1;
                    ctx.beginPath();
                    ctx.moveTo(cx+nodes[i].x, cy+nodes[i].y);
                    // Bezier for organic feel
                    const mx=(nodes[i].x+nodes[j].x)/2, my=(nodes[i].y+nodes[j].y)/2;
                    ctx.quadraticCurveTo(cx+mx+Math.sin(t+i)*8, cy+my+Math.cos(t+j)*8, cx+nodes[j].x, cy+nodes[j].y);
                    ctx.stroke();
                }
            }
        }

        // Nodes
        nodes.forEach(n => {
            // Glow
            ctx.fillStyle = `rgba(${n.col[0]},${n.col[1]},${n.col[2]},0.08)`;
            ctx.beginPath(); ctx.arc(cx+n.x,cy+n.y,8,0,Math.PI*2); ctx.fill();
            // Core
            ctx.fillStyle = `rgba(${n.col[0]},${n.col[1]},${n.col[2]},0.7)`;
            ctx.beginPath(); ctx.arc(cx+n.x,cy+n.y,3,0,Math.PI*2); ctx.fill();
        });

        // Feedback pulse rings
        const pulse = Math.sin(t*1.5)*0.5+0.5;
        ctx.strokeStyle = `rgba(${ROSE[0]},${ROSE[1]},${ROSE[2]},${pulse*0.2})`;
        ctx.lineWidth = 1;
        ctx.beginPath(); ctx.arc(cx,cy,30+pulse*15,0,Math.PI*2); ctx.stroke();

        requestAnimationFrame(draw);
    }
    draw();
})();

/* ── 02 · Invisible Architecture ── */
(function(){
    const c = document.getElementById('oppViz2');
    if(!c) return;
    const ctx = c.getContext('2d');
    const W = c.width, H = c.height;
    const GOLD=[200,169,110], TEAL=[91,200,180], ROSE=[200,110,139];

    // Org nodes
    const nodes = [
        {id:0, x:W/2, y:28, label:'CEO', rank:0, inf:1.0},
        {id:1, x:W*0.18, y:78, label:'VP Eng', rank:1, inf:0.85},
        {id:2, x:W*0.50, y:78, label:'VP Prod', rank:1, inf:0.8},
        {id:3, x:W*0.82, y:78, label:'VP Sales', rank:1, inf:0.75},
        {id:4, x:W*0.08, y:135, label:'Backend', rank:2, inf:0.6},
        {id:5, x:W*0.25, y:135, label:'Frontend', rank:2, inf:0.65},
        {id:6, x:W*0.42, y:135, label:'Design', rank:2, inf:0.7},
        {id:7, x:W*0.58, y:135, label:'Growth', rank:2, inf:0.6},
        {id:8, x:W*0.75, y:135, label:'Enterprise', rank:2, inf:0.65},
        {id:9, x:W*0.92, y:135, label:'Ops', rank:2, inf:0.55}
    ];
    const formal = [[0,1],[0,2],[0,3],[1,4],[1,5],[2,6],[2,7],[3,8],[3,9]];
    const informal = [
        [1,6,0.8],[2,1,0.9],[6,7,0.85],[4,5,0.75],[5,6,0.8],
        [7,8,0.7],[2,9,0.65],[1,7,0.6],[3,2,0.7],[6,1,0.75],[4,8,0.5],[5,2,0.65]
    ];

    // Particles
    const parts = [];
    class Part {
        constructor(f,t){ this.f=f; this.t=t; this.p=Math.random(); this.sp=0.003+Math.random()*0.002; this.sz=1.5+Math.random()*1.5; }
        update(){ this.p+=this.sp; if(this.p>1) this.p=0; }
    }

    let timer = 0;
    const PHASE_DUR = 150;

    function draw(){
        timer++;
        ctx.fillStyle = '#0B0F14';
        ctx.fillRect(0,0,W,H);

        const cycle = Math.floor(timer/PHASE_DUR) % 3;
        const t = (timer%PHASE_DUR)/PHASE_DUR;
        let formalA, informalA;
        if(cycle===0){ formalA=1; informalA=0; }
        else if(cycle===1){ formalA=Math.max(0,1-t); informalA=Math.min(1,t); }
        else { formalA=Math.min(1,t); informalA=Math.max(0,1-t); }

        // Formal connections
        if(formalA>0.01){
            ctx.strokeStyle=`rgba(${GOLD[0]},${GOLD[1]},${GOLD[2]},${formalA*0.5})`;
            ctx.lineWidth=1.5;
            formal.forEach(([a,b])=>{
                ctx.beginPath(); ctx.moveTo(nodes[a].x,nodes[a].y); ctx.lineTo(nodes[b].x,nodes[b].y); ctx.stroke();
            });
        }

        // Informal connections
        if(informalA>0.01){
            informal.forEach(([a,b,s])=>{
                const na=nodes[a], nb=nodes[b];
                const dx=nb.x-na.x, dy=nb.y-na.y;
                const len=Math.sqrt(dx*dx+dy*dy)||1;
                const px=-dy/len, py=dx/len;
                const off = (Math.sin(timer*0.03+a+b)*12+12)*informalA*0.8;
                const cpx=(na.x+nb.x)/2+px*off, cpy=(na.y+nb.y)/2+py*off;

                ctx.strokeStyle=`rgba(${TEAL[0]},${TEAL[1]},${TEAL[2]},${informalA*s*0.45})`;
                ctx.lineWidth=1+s*1.2;
                ctx.beginPath(); ctx.moveTo(na.x,na.y); ctx.quadraticCurveTo(cpx,cpy,nb.x,nb.y); ctx.stroke();

                if(s>0.7 && informalA>0.3){
                    ctx.strokeStyle=`rgba(${ROSE[0]},${ROSE[1]},${ROSE[2]},${informalA*s*0.2})`;
                    ctx.lineWidth=3+s*2;
                    ctx.beginPath(); ctx.moveTo(na.x,na.y); ctx.quadraticCurveTo(cpx,cpy,nb.x,nb.y); ctx.stroke();
                }
            });

            // Particles
            if(parts.length<informal.length*2 && Math.random()>0.6){
                const c=informal[Math.floor(Math.random()*informal.length)];
                parts.push(new Part(c[0],c[1]));
            }
            parts.forEach(p=>{
                p.update();
                const na=nodes[p.f], nb=nodes[p.t];
                const px=na.x+(nb.x-na.x)*p.p, py=na.y+(nb.y-na.y)*p.p;
                const a=Math.sin(p.p*Math.PI)*informalA*0.5;
                ctx.fillStyle=`rgba(${TEAL[0]},${TEAL[1]},${TEAL[2]},${a})`;
                ctx.beginPath(); ctx.arc(px,py,p.sz,0,Math.PI*2); ctx.fill();
            });
        }

        // Nodes
        nodes.forEach(n=>{
            const di = formalA*0.3 + informalA*n.inf;
            if(formalA>0.3){
                ctx.fillStyle=`rgba(${GOLD[0]},${GOLD[1]},${GOLD[2]},${formalA*0.7})`;
                ctx.strokeStyle=`rgba(${GOLD[0]},${GOLD[1]},${GOLD[2]},${formalA*0.9})`;
                ctx.lineWidth=1;
                ctx.fillRect(n.x-7,n.y-7,14,14);
                ctx.strokeRect(n.x-7,n.y-7,14,14);
            }
            if(informalA>0.3){
                const r=5+n.inf*4;
                ctx.fillStyle=`rgba(${TEAL[0]},${TEAL[1]},${TEAL[2]},${informalA*0.1})`;
                ctx.beginPath(); ctx.arc(n.x,n.y,r+5,0,Math.PI*2); ctx.fill();
                ctx.fillStyle=`rgba(${TEAL[0]},${TEAL[1]},${TEAL[2]},${informalA*di})`;
                ctx.beginPath(); ctx.arc(n.x,n.y,r,0,Math.PI*2); ctx.fill();
                const pulse=Math.sin(timer*0.05+n.id)*0.3+0.7;
                ctx.strokeStyle=`rgba(${TEAL[0]},${TEAL[1]},${TEAL[2]},${informalA*di*pulse*0.4})`;
                ctx.lineWidth=1;
                ctx.beginPath(); ctx.arc(n.x,n.y,r+3,0,Math.PI*2); ctx.stroke();
            }
        });

        // Phase labels
        ctx.font='8px Inter, sans-serif';
        ctx.textAlign='right';
        if(formalA>0.5){
            ctx.fillStyle=`rgba(${GOLD[0]},${GOLD[1]},${GOLD[2]},${formalA*0.3})`;
            ctx.fillText('FORMAL STRUCTURE', W-12, H-8);
        }
        if(informalA>0.5){
            ctx.fillStyle=`rgba(${TEAL[0]},${TEAL[1]},${TEAL[2]},${informalA*0.3})`;
            ctx.fillText('REAL INFLUENCE NETWORK', W-12, H-8);
        }

        requestAnimationFrame(draw);
    }
    draw();
})();

/* ── 03 · Leadership Blind Spot ── */
(function(){
    const c = document.getElementById('oppViz3');
    if(!c) return;
    const ctx = c.getContext('2d');
    const W = c.width, H = c.height;
    const GOLD=[200,169,110], TEAL=[91,200,180], ROSE=[200,110,139];

    const axes = ['Strategy','Culture','Operations','Talent','Innovation','Risk'];
    const N = axes.length;
    const conf = [0.85, 0.78, 0.82, 0.88, 0.75, 0.80];
    const real = [0.55, 0.62, 0.70, 0.45, 0.65, 0.48];

    const cx = W/2, cy = H/2;
    const R = 68;

    function polar(angle, radius){ return { x: cx + radius*Math.cos(angle), y: cy + radius*Math.sin(angle) }; }
    function ease(t){ return t<0.5? 2*t*t : -1+(4-2*t)*t; }

    let startT = null;
    const CYCLE = 6000;

    function draw(ts){
        if(!startT) startT = ts;
        const elapsed = ts - startT;
        const phase = (elapsed % CYCLE) / CYCLE;

        ctx.fillStyle = '#0B0F14';
        ctx.fillRect(0,0,W,H);

        // Grid circles
        ctx.strokeStyle = 'rgba(200,169,110,0.08)';
        ctx.lineWidth = 1;
        for(let i=1;i<=5;i++){
            ctx.beginPath(); ctx.arc(cx,cy,(R/5)*i,0,Math.PI*2); ctx.stroke();
        }

        // Axis lines + labels
        ctx.strokeStyle = 'rgba(200,169,110,0.12)';
        for(let i=0;i<N;i++){
            const a = (Math.PI*2*i)/N - Math.PI/2;
            const p = polar(a, R);
            ctx.beginPath(); ctx.moveTo(cx,cy); ctx.lineTo(p.x,p.y); ctx.stroke();
            const lp = polar(a, R+22);
            ctx.fillStyle = 'rgba(200,169,110,0.5)';
            ctx.font = 'bold 8px Inter, sans-serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(axes[i], lp.x, lp.y);
        }

        // Draw polygon helper
        function drawPoly(scores, col, fillA, strokeA, ph){
            ctx.beginPath();
            for(let i=0;i<N;i++){
                const a = (Math.PI*2*i)/N - Math.PI/2;
                const s = scores[i] * (ph<1? ease(ph) : 1);
                const p = polar(a, R*s);
                if(i===0) ctx.moveTo(p.x,p.y); else ctx.lineTo(p.x,p.y);
            }
            ctx.closePath();
            ctx.fillStyle = `rgba(${col[0]},${col[1]},${col[2]},${fillA})`;
            ctx.fill();
            ctx.strokeStyle = `rgba(${col[0]},${col[1]},${col[2]},${strokeA})`;
            ctx.lineWidth = 1.5;
            ctx.stroke();
        }

        // Confidence (always visible after phase 0)
        const confPhase = Math.min(phase/0.25, 1);
        drawPoly(conf, GOLD, 0.12, 0.6, confPhase);

        // Reality (after 0.25)
        if(phase>=0.25){
            const realPhase = Math.min((phase-0.25)/0.25, 1);
            drawPoly(real, TEAL, 0.1, 0.6, realPhase);
        }

        // Blind spots (after 0.5)
        if(phase>=0.5){
            const bsPhase = Math.min((phase-0.5)/0.3, 1);
            const pulse = Math.sin(elapsed/300)*0.5+0.5;
            for(let i=0;i<N;i++){
                const a1 = (Math.PI*2*i)/N - Math.PI/2;
                const a2 = (Math.PI*2*(i+1))/N - Math.PI/2;
                const cr = R*conf[i], rr = R*real[i];
                const gap = Math.abs(cr-rr);
                if(gap>4){
                    const minR=Math.min(cr,rr), maxR=Math.max(cr,rr);
                    const glow = Math.min(bsPhase*2,1)*(0.25+pulse*0.35);
                    ctx.fillStyle = `rgba(${ROSE[0]},${ROSE[1]},${ROSE[2]},${glow})`;
                    ctx.beginPath();
                    ctx.arc(cx,cy,maxR,a1,a2);
                    ctx.arc(cx,cy,minR,a2,a1,true);
                    ctx.closePath();
                    ctx.fill();
                }
            }

            // High leverage labels
            if(bsPhase>0.7){
                const la = Math.min((bsPhase-0.7)*3.33,1);
                const gaps = conf.map((v,i)=>({i,g:Math.abs(v-real[i])})).sort((a,b)=>b.g-a.g);
                for(let n=0;n<2;n++){
                    const i=gaps[n].i;
                    const a=(Math.PI*2*i)/N - Math.PI/2;
                    const mr = R*(conf[i]+real[i])/2+18;
                    const lp = polar(a, mr);
                    ctx.fillStyle = `rgba(${ROSE[0]},${ROSE[1]},${ROSE[2]},${la*0.8})`;
                    ctx.font = 'bold 7px Inter, sans-serif';
                    ctx.textAlign = 'center';
                    ctx.fillText('HIGH LEVERAGE', lp.x, lp.y);
                }
            }
        }

        // Legend at bottom-left
        ctx.font = '7px Inter, sans-serif';
        ctx.textAlign = 'left';
        ctx.fillStyle = `rgba(${GOLD[0]},${GOLD[1]},${GOLD[2]},0.4)`;
        ctx.fillRect(10, H-20, 6, 6);
        ctx.fillText('Confidence', 20, H-14);
        ctx.fillStyle = `rgba(${TEAL[0]},${TEAL[1]},${TEAL[2]},0.4)`;
        ctx.fillRect(80, H-20, 6, 6);
        ctx.fillText('Reality', 90, H-14);
        ctx.fillStyle = `rgba(${ROSE[0]},${ROSE[1]},${ROSE[2]},0.4)`;
        ctx.fillRect(135, H-20, 6, 6);
        ctx.fillText('Blind Spot', 145, H-14);

        requestAnimationFrame(draw);
    }
    requestAnimationFrame(draw);
})();
</script>
</body>
</html>
